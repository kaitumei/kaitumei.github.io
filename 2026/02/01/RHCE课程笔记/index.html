<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>RHCE-Linux的基础部分笔记 | Yumi-an</title><meta name="author" content="Kaitumei,zhangsan@example.com"><meta name="copyright" content="Kaitumei"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="25-10-16(SSH)1.SSH理论理论部分参考   跳转  查看 sshd 是否使用         systemctl status sshd 查询 sshd 服务的运行状态   netstat -intup | grep sshd 查询 sshd 服务对应的网络连接、监听端口   ps -aux  | grep sshd 查询系统中所有和 sshd 相关的进程详情    原理图">
<meta property="og:type" content="article">
<meta property="og:title" content="RHCE-Linux的基础部分笔记">
<meta property="og:url" content="http://kaitumei.2345.plus/2026/02/01/RHCE%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Yumi-an">
<meta property="og:description" content="25-10-16(SSH)1.SSH理论理论部分参考   跳转  查看 sshd 是否使用         systemctl status sshd 查询 sshd 服务的运行状态   netstat -intup | grep sshd 查询 sshd 服务对应的网络连接、监听端口   ps -aux  | grep sshd 查询系统中所有和 sshd 相关的进程详情    原理图">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://b5dbf24.webp.li/icons/RHCE.png">
<meta property="article:published_time" content="2026-02-01T10:00:00.000Z">
<meta property="article:modified_time" content="2026-02-06T16:53:55.777Z">
<meta property="article:author" content="Kaitumei">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="RHCE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://b5dbf24.webp.li/icons/RHCE.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "RHCE-Linux的基础部分笔记",
  "url": "http://kaitumei.2345.plus/2026/02/01/RHCE%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/",
  "image": "https://b5dbf24.webp.li/icons/RHCE.png",
  "datePublished": "2026-02-01T10:00:00.000Z",
  "dateModified": "2026-02-06T16:53:55.777Z",
  "author": [
    {
      "@type": "Person",
      "name": "Kaitumei",
      "url": "https://kaitumei.2345.plus"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://kaitumei.2345.plus/2026/02/01/RHCE%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RHCE-Linux的基础部分笔记',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_5123065_5ok3ezt9tok.css"><link rel="stylesheet" href="/css/custom-loader.css"><link rel="stylesheet" href="/css/custom-nav.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/css/custom-music.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="/css/progress_bar.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/categoryBar/categoryBar.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(https://b5dbf24.webp.li/icons/nini.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/tx.jpg" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items visible"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-fenxiang"></i><span> 分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/resources/"><i class="fa-fw iconfont icon-diannao"></i><span> 资源</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-baoxiang-"></i><span> 藏宝阁</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/project/"><i class="fa-fw iconfont icon-xiangmu"></i><span> 项目</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-xianhuaduihuanquan"></i><span> 百宝袋</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/play/animei/"><span> 追番</span></a></li><li><a class="site-page child" href="/play/games/"><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://b5dbf24.webp.li/icons/RHCE.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/" title="Yumi-an"><span class="site-name">Yumi-an</span></a></span><div id="menus"><div class="menus_items visible"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-fenxiang"></i><span> 分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/resources/"><i class="fa-fw iconfont icon-diannao"></i><span> 资源</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-baoxiang-"></i><span> 藏宝阁</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/project/"><i class="fa-fw iconfont icon-xiangmu"></i><span> 项目</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw iconfont icon-xianhuaduihuanquan"></i><span> 百宝袋</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/play/animei/"><span> 追番</span></a></li><li><a class="site-page child" href="/play/games/"><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div><div id="name-container"><a id="page-name" href="javascript:btf.scrollToDest(0, 500)">PAGE_NAME</a></div><div id="nav-right"><div id="travellings"><a class="site-page" href="https://www.travellings.cn/go.html" title="友链接力-随机开往" target="_blank" rel="noopener"><i class="fa-solid fa-bus fa-fw"></i></a></div><div id="ten-years"><a class="site-page" href="https://foreverblog.cn/go.html" title="友链接力-十年之约" target="_blank" rel="noopener"><i class="fa-brands fa-nfc-symbol fa-fw"></i></a></div><div id="random"><a class="site-page" href="javascript:toRandomPost()" title="随机前往一个文章"><i class="fa-solid fa-shuffle fa-fw"></i></a></div><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="站内搜索"><i class="fas fa-search fa-fw"></i></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="展开菜单"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RHCE-Linux的基础部分笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-01T10:00:00.000Z" title="发表于 2026-02-01 10:00:00">2026-02-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-06T16:53:55.777Z" title="更新于 2026-02-06 16:53:55">2026-02-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">11.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>54分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2026-02-06 16:53:55&quot;}" hidden></div><h1 id="25-10-16-SSH"><a href="#25-10-16-SSH" class="headerlink" title="25-10-16(SSH)"></a>25-10-16(SSH)</h1><h2 id="1-SSH理论"><a href="#1-SSH理论" class="headerlink" title="1.SSH理论"></a>1.SSH理论</h2><p><strong>理论部分参考</strong>   <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/01ssh%E7%90%86%E8%AE%BA.md">跳转</a></p>
<ul>
<li><p>查看 sshd 是否使用</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>systemctl status sshd</td>
<td>查询 <code>sshd</code> 服务的<strong>运行状态</strong></td>
</tr>
<tr>
<td>netstat -intup | grep sshd</td>
<td>查询 <code>sshd</code> 服务对应的<strong>网络连接、监听端口</strong></td>
</tr>
<tr>
<td>ps -aux  | grep sshd</td>
<td>查询系统中所有和 <code>sshd</code> 相关的<strong>进程详情</strong></td>
</tr>
</tbody></table>
</li>
<li><p>原理图</p>
</li>
</ul>
<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251018135704473.png" alt="image-20251018135704473"></p>
<blockquote>
<p>yum whatprocides netstat –查看该命令所需软件（–&gt;下载net-tools）</p>
</blockquote>
<ul>
<li>关键配置：<ul>
<li>端口修改（<code>Port</code>，默认 22，建议自定义提高安全性）。</li>
<li>禁用密码认证（<code>PasswordAuthentication no</code>），强制公钥认证。</li>
<li>禁用 root 直接登录（<code>PermitRootLogin no</code>），通过普通用户 sudo 提权。</li>
<li>限制允许登录的用户（<code>AllowUsers</code>）或组（<code>AllowGroups</code>）</li>
</ul>
</li>
</ul>
<h2 id="2-SSH实验"><a href="#2-SSH实验" class="headerlink" title="2.SSH实验"></a>2.SSH实验</h2><h3 id="2-1-修改SSH端口"><a href="#2-1-修改SSH端口" class="headerlink" title="2.1 修改SSH端口"></a>2.1 修改SSH端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置(/etc/ssh/sshd_config)(服务器配置)</span></span><br><span class="line">[root@ssh ~]# vim /etc/ssh/sshd_config</span><br><span class="line">21 <span class="comment">#Port 22		#改端口号</span></span><br><span class="line">22 Port 666</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭防火墙和切换宽容模式</span></span><br><span class="line">[root@ssh ~]# systemctl --now <span class="built_in">disable</span> firewalld</span><br><span class="line">[root@ssh ~]# setenforce 0</span><br><span class="line">[root@ssh ~]# getenforce</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@ssh ~]# systemctl restart sshd</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d1aa036.webp.li/Build/image-20260130002411974.png" alt="image-20260130002411974"></p>
<h3 id="2-2-拒绝root用户远程登录"><a href="#2-2-拒绝root用户远程登录" class="headerlink" title="2.2 拒绝root用户远程登录"></a>2.2 拒绝root用户远程登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置(/etc/ssh/sshd_config)(服务器配置)</span></span><br><span class="line">[root@ssh ~]# vim /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#改参数</span></span><br><span class="line">    <span class="comment"># PermitRootLogin yes   ---&gt;</span></span><br><span class="line">    PermitRootLogin no</span><br><span class="line">[root@ssh ~]# systemctl restart sshd</span><br><span class="line"><span class="comment">#(------若不生效------)</span></span><br><span class="line"><span class="comment">#配置(/etc/ssh/sshd_config.d/01-permitrootlogin.conf)</span></span><br><span class="line">[root@ssh ~]# vim /etc/ssh/sshd_config.d/01-permitrootlogin.conf</span><br><span class="line">    <span class="comment"># PermitRootLogin yes   ---&gt;</span></span><br><span class="line">    PermitRootLogin no</span><br><span class="line">[root@ssh ~]# systemctl restart sshd</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d1aa036.webp.li/Build/image-20260130003058267.png" alt="image-20260130003058267"></p>
<h3 id="2-3-允许特定用户ssh登录，其余用户无法登录（包括root用户）"><a href="#2-3-允许特定用户ssh登录，其余用户无法登录（包括root用户）" class="headerlink" title="2.3 允许特定用户ssh登录，其余用户无法登录（包括root用户）"></a>2.3 允许特定用户ssh登录，其余用户无法登录（包括root用户）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置(/etc/ssh/sshd_config)(服务器配置)</span></span><br><span class="line">[root@ssh ~]# vim /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#改参数</span></span><br><span class="line">    <span class="comment">#AllowUsers USERNAME 	---&gt;</span></span><br><span class="line">    AllowUsers zhangsan</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@ssh ~]# systemctl restart sshd</span><br><span class="line"><span class="comment">#注：</span></span><br><span class="line"><span class="comment">#USERNAME需要存在，多个用户之间使用空格隔开</span></span><br><span class="line"></span><br><span class="line">[root@ssh ~]# systemctl restart sshd</span><br><span class="line">[root@ssh ~]# useradd zhangsan</span><br><span class="line">[root@ssh ~]# passwd zhangsan</span><br><span class="line">更改用户 zhangsan 的密码 。</span><br><span class="line">新的密码： </span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的密码： </span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d1aa036.webp.li/Build/image-20260130003746580.png" alt="image-20260130003746580"></p>
<h3 id="2-4-liunx客户端通过密钥登录liunx服务端root用户"><a href="#2-4-liunx客户端通过密钥登录liunx服务端root用户" class="headerlink" title="2.4 liunx客户端通过密钥登录liunx服务端root用户"></a>2.4 liunx客户端通过密钥登录liunx服务端root用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#服务端(无需操作)</span></span><br><span class="line"><span class="comment">#客户端：</span></span><br><span class="line"><span class="comment">#1.创建密钥对</span></span><br><span class="line">[root@client ~]# ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line">/root/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:RiUr92e99iK9aId8lj91L+LfIPOwMO/GBW8+TLMcN6Q root@client</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 3072]----+</span></span><br><span class="line"><span class="string">|        . .      |</span></span><br><span class="line"><span class="string">|         +       |</span></span><br><span class="line"><span class="string">|      . +        |</span></span><br><span class="line"><span class="string">|       + .  .. . |</span></span><br><span class="line"><span class="string">|        S . oo+  |</span></span><br><span class="line"><span class="string">|       .   o EBo+|</span></span><br><span class="line"><span class="string">|          oo+X+*=|</span></span><br><span class="line"><span class="string">|           +OO#=.|</span></span><br><span class="line"><span class="string">|           =*B+*=|</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#2.将公玥发送至服务端(用户的家目录的.ssh/authorized_keys)</span></span><br><span class="line"><span class="string">[root@client ~]# ssh-copy-id root@172.25.254.129</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">root@172.25.254.129&#x27;</span>s password: </span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh &#x27;root@172.25.254.129&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.客户端免密登录</span></span><br><span class="line">[root@client ~]# ssh root@172.25.254.129</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ssh-keygen (生成、管理和转换认证密钥)     -t (制定类型 RSA)<br>    &#x2F;root&#x2F;.ssh&#x2F;id_rsa  ——  私钥文件<br>   &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub  —–  公钥文件</p>
</blockquote>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d1aa036.webp.li/Build/image-20260130004928605.png" alt="image-20260130004928605"></p>
<h3 id="2-5-windows客户端通过秘钥登录linux服务端root用户"><a href="#2-5-windows客户端通过秘钥登录linux服务端root用户" class="headerlink" title="2.5 windows客户端通过秘钥登录linux服务端root用户"></a>2.5 windows客户端通过秘钥登录linux服务端root用户</h3><blockquote>
<p>上传至<span style="text-decoration:underline;">autgorized_keys</span></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、生成公私钥对</span></span><br><span class="line">	ssh-keygen -t rsa</span><br><span class="line"><span class="comment">#2、将公钥上传到服务器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3、测试免密登录</span></span><br><span class="line">ssh  root@192.168.223.5</span><br><span class="line"><span class="comment">#4.使用XShell自带的密钥生成密钥对，然后复制到服务器上</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>​             加密 </p>
<p>公钥&lt;————&gt;私钥</p>
<p>​	    解密</p>
</blockquote>
<h2 id="3-SSH协议原理"><a href="#3-SSH协议原理" class="headerlink" title="3. SSH协议原理"></a>3. SSH协议原理</h2><h3 id="3-1-连接过程"><a href="#3-1-连接过程" class="headerlink" title="3.1 连接过程"></a>3.1 连接过程</h3> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251012105145531.png" alt="image-20251012105145531"  />

<p><strong>说明</strong> </p>
<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251012105343249.png" alt="image-20251012105343249"></p>
<h3 id="3-2-两种认证方式"><a href="#3-2-两种认证方式" class="headerlink" title="3.2 两种认证方式"></a>3.2 两种认证方式</h3><ul>
<li>密码认证：通过用户名+密码验证（安全性较低，易受暴力破解）。</li>
</ul>
<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251012110434119.png" alt="image-20251012110434119"></p>
<ul>
<li>公钥认证：基于密钥对（公钥存服务器，私钥存客户端），安全性更高，是推荐方式。</li>
</ul>
<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251012110246733.png" alt="image-20251012110246733"></p>
<h1 id="25-10-18-at-crond"><a href="#25-10-18-at-crond" class="headerlink" title="25-10-18(at&#x2F;crond)"></a>25-10-18(at&#x2F;crond)</h1><h2 id="1-计划任务理论"><a href="#1-计划任务理论" class="headerlink" title="1.计划任务理论"></a>1.计划任务理论</h2><p><strong>理论部分参考</strong> <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/02%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-计划任务"><a href="#2-计划任务" class="headerlink" title="2.计划任务"></a>2.计划任务</h2><p><strong>随课记</strong></p>
<blockquote>
<p>witch at  — 查看at命令所在目录</p>
<p>yum whatprovides *&#x2F;at — 查找命令由哪个软件包提供</p>
<p>at -V  —- 查看软件版本</p>
<p>yum install at -y   —- 安装at</p>
<p>systemctl start atd.service  — 运行at</p>
<p>wall 【内容】 —- 广播内容</p>
<p>at -l   —- 查看计划任务</p>
<p>at -d  — 删除计划任务</p>
<p>atrm [任务编号]    ——   删除计划任务</p>
<p>&#x2F;var&#x2F;log&#x2F;cron —-  日志文件</p>
<p>&#x2F;var&#x2F;spool&#x2F;at</p>
</blockquote>
<h3 id="2-1-一次性计划任务【at】"><a href="#2-1-一次性计划任务【at】" class="headerlink" title="2.1 一次性计划任务【at】"></a>2.1 一次性计划任务【at】</h3><blockquote>
<p><span style="color:#CC0000; font-size:1.6em;">at </span> [HH:MM]  [yyyy-mm-dd]   #设置一次性计划任务</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>-l</strong></td>
<td>列出系统上所有用户的at任务，等价于atq</td>
</tr>
<tr>
<td align="center"><strong>-d</strong></td>
<td>删除或取消一个任务</td>
</tr>
<tr>
<td align="center"><strong>-v</strong></td>
<td>使用时间格式，列出at任务</td>
</tr>
<tr>
<td align="center"><strong>-c</strong></td>
<td>可以列出任务之后的命令内容</td>
</tr>
<tr>
<td align="center"><strong>-f</strong></td>
<td>从文件中读取</td>
</tr>
</tbody></table>
<h4 id="2-1-1-实现形式"><a href="#2-1-1-实现形式" class="headerlink" title="2.1.1 实现形式"></a>2.1.1 实现形式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定任务</span></span><br><span class="line">[root@1010 ~]# at 10;00  <span class="comment">#系统时间10点执行</span></span><br><span class="line">    warning: commands will be executed using /bin/sh</span><br><span class="line">    at&gt; wall 6666 <span class="comment"># 广播6666</span></span><br><span class="line">    at&gt; &lt;EOT&gt;   <span class="comment">#ctrl d 生成任务</span></span><br><span class="line">    job 1 at Sun Jan  5 9:59:00 2025</span><br><span class="line"><span class="comment">#at相关命令</span></span><br><span class="line">    at -l  或  atq 	 --- 			     查看任务</span><br><span class="line">    at -c [编号]  		--- 			查看任务具体内容</span><br><span class="line">    atrm [编号] 或 at -d [编号] --- 		  删除任务</span><br><span class="line">	<span class="built_in">tail</span> -f /var/log/cron		---		 查看系统是否执行</span><br><span class="line">	或 watch -n [编号] <span class="built_in">ls</span> -l /root</span><br></pre></td></tr></table></figure>

<ul>
<li><span style="border:1px solid #330000;">计划任务保存在目录： &#x2F;var&#x2F;spool&#x2F;at</span></li>
<li><span style="border:1px solid #330000;">计划任务的日志：&#x2F;var&#x2F;log&#x2F;cron</span></li>
</ul>
<p><span style="color:#FF0000;">注意</span>：</p>
<blockquote>
<p>at命令的输出结果（标准输出和标准错误输出）不会显示到屏幕上 </p>
<p>at命令中执行的命令最好使用绝对路径，不容易报错 </p>
<p>过程：输入at 时间 -&gt; 回车 -&gt;输入执行的命令-&gt;ctrl+d退出at </p>
<p>at命令只会执行一次，时间过了就不再执行</p>
</blockquote>
<h4 id="2-1-2-时间的书写格式"><a href="#2-1-2-时间的书写格式" class="headerlink" title="2.1.2 时间的书写格式"></a>2.1.2 时间的书写格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、指定时间</span></span><br><span class="line">am、pm   12小时制</span><br><span class="line">HH:MM   24小时制</span><br><span class="line">年月日   06122024   2024-12-06  12/06/2024   06.12.2024</span><br><span class="line">      MMDD[CC]YY  [CC]YY-MM-DD.  MM/DD/[CC]YY  DD.MM.[CC]YY  </span><br><span class="line"> [HH:MM]  [yyyy-mm-dd]  </span><br><span class="line"><span class="comment">#2、模糊时间</span></span><br><span class="line">noon（12:00）   midnight（00:00）   teatime（4pm）</span><br><span class="line"><span class="comment">#3、相对时间</span></span><br><span class="line">now +1 min  now +2 days</span><br><span class="line"><span class="comment">#要在三天后的下午4点运行作业    at 4pm + 3 days</span></span><br><span class="line"><span class="comment">#要在7月31日上午10点运行作业   at 10am Jul 31</span></span><br><span class="line"><span class="comment">#要在明天的凌晨1点运行作业     at 1am tomorrow</span></span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-黑白名单"><a href="#2-1-3-黑白名单" class="headerlink" title="2.1.3 黑白名单"></a>2.1.3 黑白名单</h4><blockquote>
<p>超级用户可以在任何情况下使用这些命令。</p>
<p>对于其他用户，使用 at 的权限由文件 &#x2F;etc&#x2F;at.allow 和 &#x2F;etc&#x2F;at.deny 确定</p>
<p>​	1、格式：每行一个用户名称，不允许有空白字符</p>
<p>​	2、系统先检测at.allow,如果at.allow存在，其中的用户允许at，即使at.deny也存	      在该用户也会被忽略</p>
<p>​	3、如果at.allow不存在才检测at.deny,其中用户不允许at，剩下的用户可使用at</p>
<p>​	4、at.allow at.deny 都不存在，只有root可用at</p>
</blockquote>
<h4 id="2-1-4-注意点"><a href="#2-1-4-注意点" class="headerlink" title="2.1.4 注意点"></a>2.1.4 注意点</h4><ul>
<li><span style="background:#CCFFFF;">权限：不同用户对系统的使用权限不一样，设置任务的时候，该任务的一定要在该用户的权限范围之内</span></li>
</ul>
<h3 id="2-2-周期性计划任务【crond】"><a href="#2-2-周期性计划任务【crond】" class="headerlink" title="2.2 周期性计划任务【crond】"></a>2.2 周期性计划任务【crond】</h3><h4 id="2-2-1-实现形式"><a href="#2-2-1-实现形式" class="headerlink" title="2.2.1 实现形式"></a>2.2.1 实现形式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置文件</span></span><br><span class="line">[root@1010 ~]# systemctl status crond.service <span class="comment">#查看服务是否启动</span></span><br><span class="line">[root@1010 ~]# rpm -ql crontabs </span><br><span class="line">/etc/cron.daily</span><br><span class="line">/etc/cron.hourly</span><br><span class="line">/etc/cron.monthly</span><br><span class="line">/etc/cron.weekly</span><br><span class="line">/etc/crontab</span><br><span class="line">/etc/sysconfig/run-parts</span><br><span class="line">/usr/bin/run-parts</span><br><span class="line">/usr/share/licenses/crontabs</span><br><span class="line">/usr/share/licenses/crontabs/COPYING</span><br><span class="line">/usr/share/man/man4/crontabs.4.gz</span><br><span class="line">/usr/share/man/man4/run-parts.4.gz</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定任务</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###方法1.编辑系统的crontab 文件，由crond进程管理</span></span><br><span class="line">[root@1010 ~]# vim /etc/crontab</span><br><span class="line"></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  * user-name  command to be executed</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###方法2.以用户身份添加计划任务，并以用户的身份命名的文件保存在/var/spool/cron/目录下</span></span><br><span class="line">[root@1010 ~]# crontab -e -u root(用户)</span><br><span class="line"> *  *  *  *  * <span class="built_in">ls</span> &gt; /file</span><br><span class="line"> </span><br><span class="line">[root@1010 ~]# ll /var/spool/cron/	<span class="comment"># 查看任务编号及数量</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 26 10月 18 20:11 root</span><br><span class="line"></span><br><span class="line">[root@1010 ~]# <span class="built_in">cat</span> /var/spool/cron/root  <span class="comment">#查看任务内容</span></span><br><span class="line"> *  *  *  *  * <span class="built_in">ls</span> &gt; /file</span><br><span class="line"> </span><br><span class="line"><span class="comment">#crontab相关命令</span></span><br><span class="line">crontab -l			列出当前用户的 crontab 文件内容。</span><br><span class="line">crontab -r			删除当前用户的 crontab 文件。</span><br><span class="line">crontab -e 			修改任务的执行时间和任务内容。</span><br><span class="line"><span class="comment">#可以添加 -u  来选择用户，但是要注意权限问题。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###方法3.包含为不同用户存储的不同类别的任务，系统定时任务的目录，由crond进程管理</span></span><br><span class="line"><span class="comment">#/etc/cron.d/ </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个名为 nginx_maintenance的文件，放在/etc/cron.d/目录下，可以清晰地知道该</span></span><br><span class="line"><span class="comment"># 文件是用于   nginx   服务的维护任务，并且能够快速地找到和修改相关的定时任务配置。</span></span><br><span class="line"></span><br><span class="line">[root@1010 ~]# /etc/cron.d/nginx_maintenance </span><br><span class="line"><span class="comment"># 清理旧的日志文件，每周执行一次</span></span><br><span class="line">0 2 * * 7 root /usr/local/bin/cleanup_nginx_logs.sh</span><br><span class="line"><span class="comment"># 检查配置文件的完整性，每天执行一次</span></span><br><span class="line">0 1 * * * root /usr/local/bin/check_nginx_config.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#crontab执行的每一项工作都会被记录到日志：/var/log/cron</span></span><br><span class="line"><span class="built_in">tail</span> -f /var/log/cron  <span class="comment">## %需要转义</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">tail</span> -n 1 /etc/crontab </span><br><span class="line">* 10 * * *   root  <span class="built_in">echo</span> 123 &gt; <span class="string">&quot;/file1_`date +\%R`&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-时间书写格式"><a href="#2-2-2-时间书写格式" class="headerlink" title="2.2.2 时间书写格式"></a>2.2.2 时间书写格式</h4><p><span style="color:#FF0000;">*     *     *     *     *</span></p>
<p>分   时   日    月     周</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#特殊符号</span></span><br><span class="line">*：代表指定时间单位中的每一个时刻。例如，*在分钟字段中表示每分钟。</span><br><span class="line">,：用于分隔列表中的项目。例如，1,3,5 * * * * <span class="built_in">command</span> 表示每个小时的第1、3、5分钟执行命令。</span><br><span class="line">-：用于定义范围。例如，0 9-17 * * * <span class="built_in">command</span> 表示从早上9点到下午5点每小时开始时执行命令。</span><br><span class="line">/数字：用于指定步长。例如，*/15 * * * * <span class="built_in">command</span> 表示每15分钟执行一次命令。</span><br><span class="line"></span><br><span class="line">分 时 日 月 周</span><br><span class="line">*/2 */2 */2 */2 *</span><br><span class="line">* * * * */2</span><br><span class="line">* * L 1-6/2 *</span><br><span class="line">* * * * 2</span><br><span class="line">* 8 * * *  每天8点的每一分钟</span><br><span class="line">0 8 * * *  每天8：00执行</span><br><span class="line">13 0 1 * *   每月1日00：13执行</span><br><span class="line">*/2 12 * * * 每天12点每两分钟执行</span><br><span class="line">* 11,23 * * *   每天11点和23点的每一分钟都 执行</span><br><span class="line">* 1-3 * * *    每天的1点、2点、3点的每一分钟都执行</span><br><span class="line"></span><br><span class="line"><span class="comment">###特殊情况：</span></span><br><span class="line"><span class="comment">#2025年1月5日是星期日，当日期和星期冲突的时候，那么这天和这个星期都会执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###如果想在每年的2月最后一天凌晨2点执行任务</span></span><br><span class="line">* * L 2 * </span><br><span class="line"></span><br><span class="line"><span class="comment">#  anacron   能够在系统启动后自动执行定期任务，即使系统在任务预定时间未运行，任务也会在系统下次启动时执行.</span></span><br><span class="line">[root@1010 ~]# rpm -ql cronie-anacron</span><br><span class="line">/etc/anacrontab</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-黑白名单"><a href="#2-2-3-黑白名单" class="headerlink" title="2.2.3 黑白名单"></a>2.2.3 黑白名单</h4><p><span style="border:1px solid #330000;"> &#x2F;etc&#x2F;cron.allow </span>    <span style="border:1px solid #330000;">&#x2F;etc&#x2F;cron.deny      </span> </p>
<blockquote>
<p>cron.allow和cron.deny文件不能用于限制cron的执行；它们只限制crontab的使用。</p>
<p>特别是，限制访问crontab对用户的现有crontab没有影响。其工作将继续直到crontab被删除。<br>调用crontab的用户必须能够读取cron.allow和cron.deny文件。如果不是这样，那么它们就被视为不存在。</p>
<p>当系统中有 &#x2F;etc&#x2F;cron.allow 文件时，只有写入此文件的用户可以使用 crontab 命令，没有写入的用户不能使用crontab 命令。<br>同样，如果有此&#x2F;etc&#x2F;cron.allow文件，&#x2F;etc&#x2F;cron.deny 文件会被忽略，因为 &#x2F;etc&#x2F;cron.allow 文件的优先级更高<br>当系统中只有 &#x2F;etc&#x2F;cron.deny 文件时，写入此文件的用户不能使用 crontab 命令，没有写入文件的用户可以使用 crontab 命令</p>
<p>crontab 执行的每一项工作都会被 记录到 &#x2F;var&#x2F;log&#x2F;cron 这个日志文件中<br>当用户使用 crontab 新建工作之后，该项工作就会被记录到 &#x2F;var&#x2F;spool&#x2F;cron&#x2F;目录里面</p>
</blockquote>
<h4 id="2-2-4-扩展-【run-parts】"><a href="#2-2-4-扩展-【run-parts】" class="headerlink" title="2.2.4 扩展 【run-parts】"></a>2.2.4 扩展 【run-parts】</h4><blockquote>
<p>run-parts：该命令可将后面接的“目录”内的所有文件找出来执行。</p>
</blockquote>
<p>假设我们有一个名为 scripts 的目录，其中包含以下可执行脚本：<br>&#x2F;scripts&#x2F;<br>├── script1.sh<br>├── script2.sh<br>└── script3.sh<br>我们想要在每天的凌晨 1 点执行这些脚本。我们可以这样做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.确保脚本有执行权限。</span></span><br><span class="line">[root@1010 ~] <span class="comment">#chmod  +x /scripts/*.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.设置周期性任务</span></span><br><span class="line">[root@1010 ~] <span class="comment"># vim /etc/crontab</span></span><br><span class="line">01 * * * *   run-parts  /scripts</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.检查</span></span><br><span class="line">[root@1010 ~] <span class="comment"># mkdir /shell</span></span><br><span class="line">[root@1010 ~] <span class="comment"># vim /shell/1.sh</span></span><br><span class="line">[root@1010 ~] <span class="comment"># vim /shell/2.sh</span></span><br><span class="line">[root@1010 ~] <span class="comment"># vim /shell/3.sh</span></span><br><span class="line">[root@1010 ~] <span class="comment"># chmod  u+x /shell/* </span></span><br><span class="line">[root@1010 ~] <span class="comment"># vim /etc/crontab</span></span><br><span class="line">* 11 * * *   root   run-parts  /shell    <span class="comment">#注意/shell 是目录</span></span><br><span class="line"><span class="comment">#日志追踪</span></span><br><span class="line">[root@1010 ~] <span class="comment"># tail -f  /var/log/cron</span></span><br></pre></td></tr></table></figure>

<h1 id="25-10-23-chrony"><a href="#25-10-23-chrony" class="headerlink" title="25-10-23(chrony)"></a>25-10-23(chrony)</h1><h2 id="1-ntp理论"><a href="#1-ntp理论" class="headerlink" title="1.ntp理论"></a>1.ntp理论</h2><p><strong>理论部分参考</strong>   <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/03ntp%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-ntp实验"><a href="#2-ntp实验" class="headerlink" title="2.ntp实验"></a>2.ntp实验</h2><h3 id="2-1-chrony"><a href="#2-1-chrony" class="headerlink" title="2.1.chrony"></a>2.1.chrony</h3><blockquote>
<p>chronyc sources  — 查看每个时间源更详细的统计信息</p>
<p>date  — 显示时间</p>
<p>chrony 的主配置文件：&#x2F;etc&#x2F;chrony.conf</p>
</blockquote>
<p><strong>概念：</strong></p>
<p>chrony是一个开源的自由软件，它能帮助你保持系统时钟与时钟服务器（NTP）同步，因此让你的时间保持精确。</p>
<h3 id="2-2-安装与查看"><a href="#2-2-安装与查看" class="headerlink" title="2.2.安装与查看"></a>2.2.安装与查看</h3><blockquote>
<p>yum install chrony -y	# 安装</p>
<p>systemctl start  chronyd 	#启动服务</p>
<p>systemctl start  chronyd 	#重启服务</p>
<p>systemctl enable  chronyd	#开机自启</p>
<p>systemctl status ntp 	# 查看ntp状态</p>
</blockquote>
<h4 id="2-2-1-实验1—-同步时间"><a href="#2-2-1-实验1—-同步时间" class="headerlink" title="2.2.1 实验1—-同步时间"></a>2.2.1 实验1—-同步时间</h4><p><strong>(1) 手动修改至错误时间</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# <span class="built_in">date</span> -s 8:00</span><br><span class="line">2025年 10月 23日 星期四 08:00:00 CST</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-00-36.png" alt="PixPin_2025-10-23_20-00-36"></p>
<p><strong>(2) 编辑配置文件</strong></p>
<p><strong>检查网络</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# ping ntp.aliyun.com		<span class="comment">#检查是否能连通阿里云授时中心</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-04-31.png" alt="PixPin_2025-10-23_20-04-31"></p>
<p><strong>修改&#x2F;etc&#x2F;chrony.conf文件</strong></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-04-01.png" alt="img"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# vim /etc/chrony.conf</span><br></pre></td></tr></table></figure>

<p><strong>(3) 重启服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# systemctl restart  chronyd</span><br><span class="line">[root@1010 ~]# systemctl status  chronyd	<span class="comment">#查看服务状态</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-08-25.png" alt="PixPin_2025-10-23_20-08-25"></p>
<p><strong>(4) 验证</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# chronyc  sources	<span class="comment"># 列出时间源  添加-v(更详细)</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-09-55.png" alt="PixPin_2025-10-23_20-09-55"></p>
<blockquote>
<p>与阿里云地址相同，同步成功</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# timedatectl   status</span><br><span class="line">[root@1010 ~]# <span class="built_in">date</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-11-04.png" alt="PixPin_2025-10-23_20-11-04"></p>
<h4 id="2-2-2-实验2—搭建本地时间同步服务器"><a href="#2-2-2-实验2—搭建本地时间同步服务器" class="headerlink" title="2.2.2 实验2—搭建本地时间同步服务器"></a>2.2.2 实验2—搭建本地时间同步服务器</h4><h5 id="服务端配置（192-168-232-3）"><a href="#服务端配置（192-168-232-3）" class="headerlink" title="服务端配置（192.168.232.3）"></a>服务端配置（192.168.232.3）</h5><h5 id="1-网络检查（ping客户端）"><a href="#1-网络检查（ping客户端）" class="headerlink" title="(1) 网络检查（ping客户端）"></a>(1) 网络检查（ping客户端）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# ping 192.168.232.131</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-21-49.png" alt="PixPin_2025-10-23_20-21-49"></p>
<h5 id="2-编辑配置文件-已安装服务"><a href="#2-编辑配置文件-已安装服务" class="headerlink" title="(2) 编辑配置文件(已安装服务)"></a>(2) 编辑配置文件(已安装服务)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# vim /etc/chrony.conf</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-19-26.png" alt="PixPin_2025-10-23_20-19-26"></p>
<blockquote>
<p>基于实验一已经配置阿里云的时间源的情况下，允许客户端同步服务端的时间源</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# systemctl restart chronyd	<span class="comment">#重启服务</span></span><br></pre></td></tr></table></figure>

<h5 id="客户端（192-168-232-131）"><a href="#客户端（192-168-232-131）" class="headerlink" title="客户端（192.168.232.131）"></a>客户端（192.168.232.131）</h5><h5 id="1-网络检查"><a href="#1-网络检查" class="headerlink" title="(1) 网络检查"></a>(1) 网络检查</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# ping 192.168.232.3</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-25-38.png" alt="PixPin_2025-10-23_20-25-38"></p>
<h5 id="2-软件安装"><a href="#2-软件安装" class="headerlink" title="(2) 软件安装"></a>(2) 软件安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# yum  install  chrony  -y   </span><br><span class="line">[root@hym ~]# systemctl status  chronyd  <span class="comment"># 查看服务状态</span></span><br></pre></td></tr></table></figure>

<h5 id="3-配置文件（时间源改为服务端的）"><a href="#3-配置文件（时间源改为服务端的）" class="headerlink" title="(3) 配置文件（时间源改为服务端的）"></a>(3) 配置文件（时间源改为服务端的）</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# vim  /etc/chrony.conf </span><br><span class="line">[root@hym ~]# systemctl restart  chronyd	<span class="comment">#重启服务</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-29-40.png" alt="PixPin_2025-10-23_20-29-40"></p>
<h5 id="4-检查"><a href="#4-检查" class="headerlink" title="(4) 检查"></a>(4) 检查</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# chronyc  sources</span><br><span class="line">[root@1010 ~]# timedatectl   status</span><br><span class="line">[root@1010 ~]# <span class="built_in">date</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-23_20-32-31.png" alt="PixPin_2025-10-23_20-32-31"></p>
<h1 id="25-10-24-Nginx"><a href="#25-10-24-Nginx" class="headerlink" title="25-10-24(Nginx)"></a>25-10-24(Nginx)</h1><h2 id="1-Nginx理论"><a href="#1-Nginx理论" class="headerlink" title="1 Nginx理论"></a>1 Nginx理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/04web%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-Nginx实验"><a href="#2-Nginx实验" class="headerlink" title="2 Nginx实验"></a>2 Nginx实验</h2><p><strong>安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# yum install nginx -y</span><br></pre></td></tr></table></figure>

<p><strong>启动</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# systemctl start nginx.service</span><br></pre></td></tr></table></figure>

<blockquote>
<p>systemctl restart nginx.service	 重新启动Nginx服务</p>
<p>systemctl status nginx.service	  查看运行状态</p>
</blockquote>
<blockquote>
<p>核心配置：&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</p>
</blockquote>
<h3 id="2-1-实验1：Nginx基础"><a href="#2-1-实验1：Nginx基础" class="headerlink" title="2.1 实验1：Nginx基础"></a>2.1 实验1：Nginx基础</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">[root@1010 ~]# yum install nginx -y</span><br><span class="line"><span class="comment">#服务启动</span></span><br><span class="line">[root@1010 ~]# systemctl start nginx.service</span><br><span class="line"><span class="comment">#关闭防火墙</span></span><br><span class="line">[root@1010 ~]# systemctl --now <span class="built_in">disable</span> firewalld.service</span><br><span class="line"><span class="comment">#设置兼容模式</span></span><br><span class="line">[root@1010 ~]# setenforce 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认目录为	&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-06-42.png" alt="PixPin_2025-10-24_23-06-42"></p>
<h3 id="2-2-实验2：修改端口、默认目录、默认文件访问web页面"><a href="#2-2-实验2：修改端口、默认目录、默认文件访问web页面" class="headerlink" title="2.2 实验2：修改端口、默认目录、默认文件访问web页面"></a>2.2 实验2：修改端口、默认目录、默认文件访问web页面</h3><h4 id="多端口访问同一web页面"><a href="#多端口访问同一web页面" class="headerlink" title="多端口访问同一web页面"></a>多端口访问同一web页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件(/etc/nginx/nginx.conf)</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">        listen       80;</span><br><span class="line">        listen       81;	<span class="comment">#添加81端口</span></span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-12-03.png" alt="PixPin_2025-10-24_23-12-03"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启Nginx服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx.service </span><br><span class="line"><span class="comment">#防火墙</span></span><br><span class="line">[root@1010 ~]# systemctl --now <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#兼容模式</span></span><br><span class="line">[root@1010 ~]# setenforce 0</span><br><span class="line"><span class="comment">#监听端口</span></span><br><span class="line">[root@1010 ~]# netstat -lntup | grep nginx</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-20-52.png" alt="PixPin_2025-10-24_23-20-52"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80</span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:81</span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-42-35.png" alt="PixPin_2025-10-24_23-42-35" style="zoom: 50%;" />

<h4 id="自定义默认目录"><a href="#自定义默认目录" class="headerlink" title="自定义默认目录"></a>自定义默认目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">       <span class="comment"># root         /usr/share/nginx/html;</span></span><br><span class="line">        root         /web;</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-46-53.png" alt="PixPin_2025-10-24_23-46-53"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /web</span><br><span class="line">[root@1010 ~]# systemctl restart nginx.service</span><br><span class="line">[root@1010 ~]# vim /web/index.html</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-50-09.png" alt="PixPin_2025-10-24_23-50-09"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span><br><span class="line">	&lt;img src=<span class="string">&quot;https://ts1.tc.mm.bing.net/th/id/R-C.987f582c510be58755c4933cda68d525?	rik=C0D21hJDYvXosw&amp;riu=http%3a%2f%2fimg.pconline.com.cn%2fimages%2fupload%2fupc%	2ftx%2fwallpaper%2f1305%2f16%2fc4%2f20990657_	1368686545122.jpg&amp;ehk=netN2qzcCVS4ALUQfDOwxAwFcy41oxC%2b0xTFvOYy5ds%	3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&quot;</span>  height=<span class="string">&quot;600px&quot;</span> width=<span class="string">&quot;800px&quot;</span>&gt;</span><br><span class="line">	&lt;/img&gt;</span><br><span class="line">	&lt;div&gt;测试图像&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-24_23-52-31.png" alt="PixPin_2025-10-24_23-52-31" style="zoom: 67%;" />

<h4 id="通过不同文件访问web页面"><a href="#通过不同文件访问web页面" class="headerlink" title="通过不同文件访问web页面"></a>通过不同文件访问web页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/default.d/web.conf</span><br><span class="line">location /html &#123;</span><br><span class="line">  root /web;</span><br><span class="line">  index 1.html;</span><br><span class="line">  error_log /web/error/web_error.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /web</span><br><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /web/html</span><br><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /web/error</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;/web/html  mulu xia&#x27;</span> &gt; /web/html/1.html</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看目录结构</span></span><br><span class="line">[root@1010 ~]# tree /web</span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_11-25-24.png" alt="PixPin_2025-10-25_11-25-24" style="zoom: 150%;" />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3/html/</span><br><span class="line">/web/html  mulu xia</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_11-19-53.png" alt="PixPin_2025-10-25_11-19-53"></p>
<h3 id="3-3-实验三：基于不同端口-目录、IP、域名-访问不同页面"><a href="#3-3-实验三：基于不同端口-目录、IP、域名-访问不同页面" class="headerlink" title="3.3 实验三：基于不同端口(目录、IP、域名)访问不同页面"></a>3.3 实验三：基于不同端口(目录、IP、域名)访问不同页面</h3><h4 id="3-3-1-基于不同端口访问不同页面"><a href="#3-3-1-基于不同端口访问不同页面" class="headerlink" title="3.3.1 基于不同端口访问不同页面"></a>3.3.1 基于不同端口访问不同页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法1：(不覆盖主配置root)</span></span><br><span class="line"><span class="comment">#配置编辑文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/port.conf</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  location / &#123;</span><br><span class="line">    index port80.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 81;</span><br><span class="line">  location / &#123;</span><br><span class="line">    index port81.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建对应html</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">cd</span> /usr/share/nginx/html/</span><br><span class="line">[root@1010 html]# <span class="built_in">echo</span> <span class="string">&quot;This is port 80&quot;</span> &gt; port80.html</span><br><span class="line">[root@1010 html]# <span class="built_in">echo</span> <span class="string">&quot;This is port 81&quot;</span> &gt; port81.html</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80</span><br><span class="line">This is port 80</span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:81</span><br><span class="line">This is port 81</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_15-18-27.png" alt="PixPin_2025-10-25_15-18-27"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法2：(设置root参数覆盖主配置文件)</span></span><br><span class="line"><span class="comment">#修改配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/port.conf</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /web;</span><br><span class="line">    index port80.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 81;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /web;</span><br><span class="line">    index port81.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建对应html</span></span><br><span class="line">[root@1010 web]# <span class="built_in">echo</span> <span class="string">&#x27;This is /web 80&#x27;</span> &gt; port80.html</span><br><span class="line">[root@1010 web]# <span class="built_in">echo</span> <span class="string">&#x27;This is /web 81&#x27;</span> &gt; port81.html</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80</span><br><span class="line">This is /web 80</span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:81</span><br><span class="line">This is /web 81</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_15-13-30.png" alt="PixPin_2025-10-25_15-13-30"></p>
<h4 id="3-3-2-基于不同目录访问不同页面"><a href="#3-3-2-基于不同目录访问不同页面" class="headerlink" title="3.3.2 基于不同目录访问不同页面"></a>3.3.2 基于不同目录访问不同页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/dir.conf</span><br><span class="line">server &#123;</span><br><span class="line">  listen 82;</span><br><span class="line">  root /web;</span><br><span class="line">  location /dir1 &#123;</span><br><span class="line">    index index1.html;</span><br><span class="line">  &#125;</span><br><span class="line">  location /dir2 &#123;</span><br><span class="line">    index index2.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建文件</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /web/dir1 /web/dir2</span><br><span class="line">[root@1010 ~]# tree /web</span><br><span class="line">/web</span><br><span class="line">├── dir1</span><br><span class="line">├── dir2</span><br><span class="line">├── error</span><br><span class="line">│   └── web_error.log</span><br><span class="line">├── html</span><br><span class="line">│   └── 1.html</span><br><span class="line">├── index.html</span><br><span class="line">├── port80.html</span><br><span class="line">└── port81.html</span><br><span class="line"></span><br><span class="line">4 directories, 5 files</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;location ---&gt; /web/dir1 &#x27;</span> &gt; /web/dir1/index1.html</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;location ---&gt; /web/dir2 &#x27;</span> &gt; /web/dir2/index2.html</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:82/dir1/</span><br><span class="line">location ---&gt; /web/dir1 </span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:82/dir2/</span><br><span class="line">location ---&gt; /web/dir2</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_15-41-01.png" alt="PixPin_2025-10-25_15-41-01"></p>
<blockquote>
<p>root &#x2F;web 可放在location外面或里面；</p>
</blockquote>
<h4 id="3-3-3-基于不同IP访问不同页面"><a href="#3-3-3-基于不同IP访问不同页面" class="headerlink" title="3.3.3 基于不同IP访问不同页面"></a>3.3.3 基于不同IP访问不同页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加IP并激活</span></span><br><span class="line">[root@1010 ~]#nmtui</span><br><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/ip.con</span><br><span class="line">server&#123;</span><br><span class="line">  listen 192.168.232.3:83;</span><br><span class="line">  root /web;</span><br><span class="line">  location /dir1 &#123;</span><br><span class="line">    index index1.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">server&#123;</span><br><span class="line">  listen 192.168.232.4:83;</span><br><span class="line">  root /web;</span><br><span class="line">  location /dir2 &#123;</span><br><span class="line">    index index2.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建目录与html文件</span></span><br><span class="line"><span class="comment">#延续上面实验的目录，不再重新创建</span></span><br><span class="line"><span class="comment">#修改html内容</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;192.168.232.3:83 location ---&gt; /web/dir1 &#x27;</span> &gt; /web/dir1/index1.html</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;192.168.232.4:83 location ---&gt; /web/dir2 &#x27;</span> &gt; /web/dir2/index2.html</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:83/dir1/</span><br><span class="line">192.168.232.3:83 location ---&gt; /web/dir1 </span><br><span class="line">[root@1010 ~]# curl 192.168.232.4:83/dir2/</span><br><span class="line">192.168.232.4:83 location ---&gt; /web/dir2</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_15-54-22.png" alt="PixPin_2025-10-25_15-54-22"></p>
<h4 id="3-3-4-基于不同域名访问不同页面"><a href="#3-3-4-基于不同域名访问不同页面" class="headerlink" title="3.3.4 基于不同域名访问不同页面"></a>3.3.4 基于不同域名访问不同页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]#  vim /etc/nginx/conf.d/www.conf</span><br><span class="line">server &#123;</span><br><span class="line">  listen 84;</span><br><span class="line">  root /web;</span><br><span class="line">  server_name hym.com;</span><br><span class="line">  location /dir1 &#123;</span><br><span class="line">    index index3.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 84;</span><br><span class="line">  root /web;</span><br><span class="line">  server_name hym.cn;</span><br><span class="line">  location /dir2 &#123;</span><br><span class="line">    index index4.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建html</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;hym.com ---&gt; dir1/&#x27;</span> &gt; /web/dir1/index3.html</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&#x27;hym.cn ---&gt; dir2/&#x27;</span> &gt; /web/dir2/index4.html</span><br><span class="line"><span class="comment">#域名映射</span></span><br><span class="line"><span class="comment">#liunx</span></span><br><span class="line">[root@1010 ~]# vim /etc/hosts</span><br><span class="line">192.168.232.3 hym.com hym.cn</span><br><span class="line"><span class="comment">#windows</span></span><br><span class="line">C:\Windows\System32\drivers\etc\hosts</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl hym.com:84/dir1/</span><br><span class="line">hym.com ---&gt; dir1/</span><br><span class="line">[root@1010 ~]# curl hym.cn:84/dir2/</span><br><span class="line">hym.cn ---&gt; dir2/</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-25_16-30-39.png" alt="PixPin_2025-10-25_16-30-39"></p>
<h1 id="25-10-29-Web"><a href="#25-10-29-Web" class="headerlink" title="25-10-29(Web)"></a>25-10-29(Web)</h1><h2 id="1-Web理论"><a href="#1-Web理论" class="headerlink" title="1.Web理论"></a>1.Web理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/04web%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-Web实验："><a href="#2-Web实验：" class="headerlink" title="2.Web实验："></a>2.Web实验：</h2><h3 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1.安装"></a>2.1.安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# dnf install httpd-tools-2.4.57-5.el9.x86_64</span><br></pre></td></tr></table></figure>

<h3 id="2-2-访问控制"><a href="#2-2-访问控制" class="headerlink" title="2.2.访问控制"></a>2.2.访问控制</h3><h4 id="2-2-1-基于不同用户的访问控制访问同一页面"><a href="#2-2-1-基于不同用户的访问控制访问同一页面" class="headerlink" title="2.2.1.基于不同用户的访问控制访问同一页面"></a>2.2.1.基于不同用户的访问控制访问同一页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建访问用户</span></span><br><span class="line">[root@1010 ~]# htpasswd -cb /etc/nginx/conf.d/auth_passwd hua1 passwd</span><br><span class="line">Adding password <span class="keyword">for</span> user hua1</span><br><span class="line">[root@1010 ~]# htpasswd -b /etc/nginx/conf.d/auth_passwd hua2 passwd</span><br><span class="line">Adding password <span class="keyword">for</span> user hua2</span><br><span class="line">[root@1010 ~]# <span class="built_in">cat</span>  /etc/nginx/conf.d/auth_passwd</span><br><span class="line">hua1:$apr1$abKnNyKn<span class="variable">$t4P9lZdmWRurMgmzASRn60</span></span><br><span class="line">hua2:$apr1$hS73hLM8<span class="variable">$z8YEsjzZdRpLfocEJ5KXh</span>.</span><br><span class="line"><span class="comment">#配置基本文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/access.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 192.168.232.3:80;</span><br><span class="line">        root /web;</span><br><span class="line">        location / &#123;</span><br><span class="line">                auth_basic on;</span><br><span class="line">                auth_basic_user_file /etc/nginx/conf.d/auth_passwd;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 192.168.232.4:80;</span><br><span class="line">        root /web;</span><br><span class="line">        location / &#123;</span><br><span class="line">                auth_basic on;</span><br><span class="line">                auth_basic_user_file /etc/nginx/conf.d/auth_passwd;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-23-33.png" alt="PixPin_2025-10-29_20-23-33" style="zoom: 80%;" />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80 -u hua1</span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80 -u hua2</span><br></pre></td></tr></table></figure>

<p> （本机）</p>
 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-27-30.png" alt="PixPin_2025-10-29_20-27-30" style="zoom: 80%;" />

<p> （浏览器）</p>
 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-28-25.png" alt="PixPin_2025-10-29_20-28-25" style="zoom:80%;" />

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-28-32.png" alt="PixPin_2025-10-29_20-28-32" style="zoom:80%;" />

<h4 id="2-2-2-基于不同的用户认证访问-不同的页面"><a href="#2-2-2-基于不同的用户认证访问-不同的页面" class="headerlink" title="2.2.2.基于不同的用户认证访问 不同的页面"></a>2.2.2.基于不同的用户认证访问 不同的页面</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">[root@1010 ~]# tree /web</span><br><span class="line">/web</span><br><span class="line">├── access</span><br><span class="line">│   └── access.html</span><br><span class="line">├── dir1</span><br><span class="line">│   ├── index1.html</span><br><span class="line">│   └── index3.html</span><br><span class="line">├── dir2</span><br><span class="line">│   ├── index2.html</span><br><span class="line">│   └── index4.html</span><br><span class="line">├── error</span><br><span class="line">│   └── web_error.log</span><br><span class="line">├── html</span><br><span class="line">│   └── 1.html</span><br><span class="line">├── index.html</span><br><span class="line">├── port80.html</span><br><span class="line">└── port81.html</span><br><span class="line"></span><br><span class="line">5 directories, 10 files</span><br><span class="line"></span><br><span class="line">[root@1010 ~]#  htpasswd -cb /etc/nginx/conf.d/auth_passwd1 hua3 passwd</span><br><span class="line">Adding password <span class="keyword">for</span> user hua3</span><br><span class="line">[root@1010 ~]# tree /etc/nginx/conf.d/</span><br><span class="line">/etc/nginx/conf.d/</span><br><span class="line">├── access.conf</span><br><span class="line">├── auth_passwd</span><br><span class="line">├── auth_passwd1</span><br><span class="line">├── dir.conf</span><br><span class="line">├── ip.conf</span><br><span class="line">├── port.conf</span><br><span class="line">└── www.conf</span><br><span class="line"></span><br><span class="line">0 directories, 7 files</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/access.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 192.168.232.3:80;</span><br><span class="line">        root /web;</span><br><span class="line">        location / &#123;</span><br><span class="line">                auth_basic on;</span><br><span class="line">                auth_basic_user_file /etc/nginx/conf.d/auth_passwd;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 192.168.232.4:80;</span><br><span class="line">        root /web;</span><br><span class="line">        location /html &#123;</span><br><span class="line">                auth_basic on;</span><br><span class="line">                auth_basic_user_file /etc/nginx/conf.d/auth_passwd1;</span><br><span class="line">                index 1.html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80 -u hua2</span><br><span class="line">Enter host password <span class="keyword">for</span> user <span class="string">&#x27;hua2&#x27;</span>:</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span><br><span class="line">	&lt;img src=<span class="string">&quot;https://ts1.tc.mm.bing.net/th/id/R-C.987f582c510be58755c4933cda68d525?	rik=C0D21hJDYvXosw&amp;riu=http%3a%2f%2fimg.pconline.com.cn%2fimages%2fupload%2fupc%	2ftx%2fwallpaper%2f1305%2f16%2fc4%2f20990657_	1368686545122.jpg&amp;ehk=netN2qzcCVS4ALUQfDOwxAwFcy41oxC%2b0xTFvOYy5ds%	3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&quot;</span>  height=<span class="string">&quot;600px&quot;</span> width=<span class="string">&quot;800px&quot;</span>&gt;</span><br><span class="line">	&lt;/img&gt;</span><br><span class="line">	&lt;div&gt;测试图像&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">[root@1010 ~]# curl 192.168.232.4:80/html/ -u hua3</span><br><span class="line">Enter host password <span class="keyword">for</span> user <span class="string">&#x27;hua3&#x27;</span>:</span><br><span class="line">/web/html  mulu xia</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> （本机）</p>
 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-43-33.png" alt="PixPin_2025-10-29_20-43-33" style="zoom:80%;" />

<p> （浏览器）</p>
 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-44-03.png" alt="PixPin_2025-10-29_20-44-03" style="zoom:80%;" />

<h4 id="2-2-3-基于源ip的访问控制"><a href="#2-2-3-基于源ip的访问控制" class="headerlink" title="2.2.3 基于源ip的访问控制"></a>2.2.3 基于源ip的访问控制</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/nginx/conf.d/access.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 192.168.232.3:80;</span><br><span class="line">        root /web;</span><br><span class="line">        location / &#123;</span><br><span class="line">                allow 192.168.232.1;</span><br><span class="line">                deny all;</span><br><span class="line"><span class="comment">#               auth_basic on;</span></span><br><span class="line"><span class="comment">#               auth_basic_user_file /etc/nginx/conf.d/auth_passwd;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-47-35.png" alt="PixPin_2025-10-29_20-47-35"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# curl 192.168.232.3:80</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.20.1&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-48-39.png" alt="PixPin_2025-10-29_20-48-39" style="zoom:80%;" />

<h3 id="2-3-https"><a href="#2-3-https" class="headerlink" title="2.3 https"></a>2.3 https</h3><h4 id="2-3-1-搭建nginx-ssl的加密认证web服务器"><a href="#2-3-1-搭建nginx-ssl的加密认证web服务器" class="headerlink" title="2.3.1 搭建nginx+ssl的加密认证web服务器"></a>2.3.1 搭建nginx+ssl的加密认证web服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建私钥</span></span><br><span class="line">[root@1010 ~]# openssl genrsa -out /web/https/1.key</span><br><span class="line"><span class="comment">#基于私玥创建证书</span></span><br><span class="line">[root@1010 ~]# openssl req -utf8 -new -key /web/https/1.key -x509 -days 100 -out /web/https/ssl.crt</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter <span class="string">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [XX]:CN</span><br><span class="line">State or Province Name (full name) []:HuNan </span><br><span class="line">Locality Name (eg, city) [Default City]:Changsha</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:</span><br><span class="line">Organizational Unit Name (eg, section) []:</span><br><span class="line">Common Name (eg, your name or your server<span class="string">&#x27;s hostname) []:www.hym.com</span></span><br><span class="line"><span class="string">Email Address []:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#编辑配置文件</span></span><br><span class="line"><span class="string">[root@1010 ~]# vim /etc/nginx/conf.d/openss.conf</span></span><br><span class="line"><span class="string">server &#123;</span></span><br><span class="line"><span class="string">        listen 192.168.232.3:443 ssl ;</span></span><br><span class="line"><span class="string">        root /web ;</span></span><br><span class="line"><span class="string">        ssl_certificate &quot;/web/https/ssl.crt&quot;;</span></span><br><span class="line"><span class="string">        ssl_certificate_key &quot;/web/https/1.key&quot;;</span></span><br><span class="line"><span class="string">        location / &#123;</span></span><br><span class="line"><span class="string">        		index index.html;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">#重启服务</span></span><br><span class="line"><span class="string">[root@1010 ~]# systemctl restart nginx</span></span><br><span class="line"><span class="string">#测试</span></span><br></pre></td></tr></table></figure>

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_20-59-57.png" alt="PixPin_2025-10-29_20-59-57" style="zoom:80%;" />

 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-10-29_21-00-08.png" alt="PixPin_2025-10-29_21-00-08" style="zoom:80%;" />

<h1 id="25-10-31-DNS"><a href="#25-10-31-DNS" class="headerlink" title="25-10-31(DNS)"></a>25-10-31(DNS)</h1><h2 id="1-DNS理论"><a href="#1-DNS理论" class="headerlink" title="1.DNS理论"></a>1.DNS理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/05dns%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-DNF实验"><a href="#2-DNF实验" class="headerlink" title="2.DNF实验"></a>2.DNF实验</h2><h3 id="2-1-安装-1"><a href="#2-1-安装-1" class="headerlink" title="2.1.安装"></a>2.1.安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询软件包名</span></span><br><span class="line">[root@1010 ~]# dnf search name DNS</span><br><span class="line">[root@1010 ~]# dnf install <span class="built_in">bind</span> bind-utils -y</span><br></pre></td></tr></table></figure>

<h3 id="2-2-正向解析"><a href="#2-2-正向解析" class="headerlink" title="2.2.正向解析"></a>2.2.正向解析</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改核心配置文件 /etc/named.conf</span></span><br><span class="line">[root@1010 ~]# vim /etc/named.conf</span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; any; &#125;;</span><br><span class="line">        directory       <span class="string">&quot;/var/named&quot;</span>;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">logging &#123;</span><br><span class="line">        channel default_debug &#123;</span><br><span class="line">                file <span class="string">&quot;data/named.run&quot;</span>;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone <span class="string">&quot;.&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> hint;</span><br><span class="line">        file <span class="string">&quot;named.ca&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">include <span class="string">&quot;/etc/named.rfc1912.zones&quot;</span>;</span><br><span class="line">include <span class="string">&quot;/etc/named.root.key&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_17-33-15.png" alt="PixPin_2025-11-05_17-33-15"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置</span></span><br><span class="line">[root@1010 ~]# vim /etc/named.rfc1912.zones</span><br><span class="line">zone <span class="string">&quot;hym.com&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> master;</span><br><span class="line">        file <span class="string">&quot;hym.com.zone&quot;</span>;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">#创建数据文件，存储dns记录</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">cd</span> /var/named/</span><br><span class="line">[root@1010 ~]# <span class="built_in">cp</span>  -a   named.localhost hym.com.zone </span><br><span class="line">[root@1010 ~]# vim hym.com.zone</span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@       IN SOA  ns.hym.com.  admin.hym.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.hym.com.</span><br><span class="line">ns      A       192.168.232.3</span><br><span class="line">www     A       192.168.232.4</span><br><span class="line">blog    CNAME      www.hym.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_18-24-13.png" alt="PixPin_2025-11-05_18-24-13"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#添加新IP</span><br><span class="line">nmcli connection modify ens160 +ipv4.addresses 172.25.0.100/24</span><br><span class="line">nmcli connection down ens160</span><br><span class="line">nmcli connection up ens160</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 ~]# systemctl restart named</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# host www.hym.com 192.168.232.3</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.3</span><br><span class="line">Address: 192.168.232.3#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">www.hym.com has address 192.168.232.4</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_19-14-46.png" alt="PixPin_2025-11-05_19-14-46"></p>
<h3 id="2-3-反向解析"><a href="#2-3-反向解析" class="headerlink" title="2.3.反向解析"></a>2.3.反向解析</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改区域配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/named.rfc1912.zones</span><br><span class="line">zone <span class="string">&quot;232.168.192.in-addr.arpa&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> master;</span><br><span class="line">        file <span class="string">&quot;192.168.232.zone&quot;</span>;</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_19-27-14.png" alt="PixPin_2025-11-05_19-27-14"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑数据文件</span></span><br><span class="line">[root@1010 named]# <span class="built_in">cd</span> /var/named/</span><br><span class="line">[root@1010 named]# <span class="built_in">cp</span> -a named.loopback 192.168.232.zone</span><br><span class="line">[root@1010 named]# vim 192.168.232.zone</span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@       IN SOA  ns2.hym.com.  admin.hym.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">                NS      ns2.hym.com.</span><br><span class="line">                </span><br><span class="line">4               PTR     ns2.hym.com.</span><br><span class="line">5               PTR     xixi.hym.com.</span><br><span class="line">6               PTR     haha.hym.com.</span><br><span class="line">7               PTR     huhu.hym.com.</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_19-25-59.png" alt="PixPin_2025-11-05_19-25-59"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@1010 named]# systemctl restart named</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 named]# host 192.168.232.6 192.168.232.4</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.4</span><br><span class="line">Address: 192.168.232.4#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">6.232.168.192.in-addr.arpa domain name pointer haha.hym.com.</span><br><span class="line">[root@1010 named]# host 192.168.232.5 192.168.232.4</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.4</span><br><span class="line">Address: 192.168.232.4#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">5.232.168.192.in-addr.arpa domain name pointer xixi.hym.com.</span><br><span class="line">[root@1010 named]# host 192.168.232.7 192.168.232.4</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.4</span><br><span class="line">Address: 192.168.232.4#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">7.232.168.192.in-addr.arpa domain name pointer huhu.hym.com.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-05_19-25-07.png" alt="PixPin_2025-11-05_19-25-07"></p>
<h3 id="2-4-主从同步"><a href="#2-4-主从同步" class="headerlink" title="2.4.主从同步"></a>2.4.主从同步</h3><h4 id="2-4-1-完全同步"><a href="#2-4-1-完全同步" class="headerlink" title="2.4.1.完全同步"></a>2.4.1.完全同步</h4><blockquote>
<p>主：192.168.232.133       从：192.168.232.3</p>
</blockquote>
<p><strong>前置：关闭防火墙，调至宽容模式</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl --now <span class="built_in">disable</span> firewalld</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<p><strong>修改配置文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#主机</span></span><br><span class="line">[root@hym ~]# vim /etc/named.conf</span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; any; &#125;;</span><br><span class="line">        directory 	<span class="string">&quot;/var/named&quot;</span>;</span><br><span class="line">        allow-query     &#123; any; &#125;;</span><br><span class="line"><span class="comment">################################################################</span></span><br><span class="line">		allow-transfer &#123; 192.168.232.3; &#125;;	<span class="comment">#允许从机转移dns记录</span></span><br><span class="line"><span class="comment">#################################################################</span></span><br><span class="line">&#125;;</span><br><span class="line">logging &#123;</span><br><span class="line">        channel default_debug &#123;</span><br><span class="line">                file <span class="string">&quot;data/named.run&quot;</span>;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone <span class="string">&quot;.&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> hint;</span><br><span class="line">        file <span class="string">&quot;named.ca&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">############################################</span></span><br><span class="line">zone <span class="string">&quot;hym.com.&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> master;</span><br><span class="line">        file <span class="string">&quot;hym.com.zone&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone <span class="string">&quot;232.168.192.in-addr.arpa&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> master;</span><br><span class="line">        file <span class="string">&quot;192.168.232.zone&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">#############################################</span></span><br><span class="line">include <span class="string">&quot;/etc/named.rfc1912.zones&quot;</span>;</span><br><span class="line">include <span class="string">&quot;/etc/named.root.key&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#从机</span></span><br><span class="line">[root@1010 ~]# vim /etc/named.conf</span><br><span class="line">options &#123;</span><br><span class="line">	listen-on port 53 &#123; any; &#125;;</span><br><span class="line">	directory 	<span class="string">&quot;/var/named&quot;</span>;</span><br><span class="line">	allow-query     &#123; any; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">logging &#123;</span><br><span class="line">        channel default_debug &#123;</span><br><span class="line">                file <span class="string">&quot;data/named.run&quot;</span>;</span><br><span class="line">                severity dynamic;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone <span class="string">&quot;.&quot;</span> IN &#123;</span><br><span class="line">	<span class="built_in">type</span> hint;</span><br><span class="line">	file <span class="string">&quot;named.ca&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line">zone <span class="string">&quot;hym.com.&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> slave;</span><br><span class="line">		masters &#123; 192.168.232.133; &#125;;	<span class="comment">#主</span></span><br><span class="line">        file <span class="string">&quot;slaves/hym.com.zone&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone <span class="string">&quot;232.168.192.in-addr.arpa&quot;</span> IN &#123;</span><br><span class="line">        <span class="built_in">type</span> slave;</span><br><span class="line">        masters &#123; 192.168.232.133; &#125;;	<span class="comment">#主</span></span><br><span class="line">        file <span class="string">&quot;slaves/192.168.232.zone&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">##########################################</span></span><br><span class="line">include <span class="string">&quot;/etc/named.rfc1912.zones&quot;</span>;</span><br><span class="line">include <span class="string">&quot;/etc/named.root.key&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>创建数据文件（主机）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# vim /var/named/hym.com.zone</span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@       IN SOA  ns.hym.com. admin.hym.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns.hym.com.</span><br><span class="line"></span><br><span class="line">ns      A       192.168.232.133</span><br><span class="line">ns2     A       192.168.232.134</span><br><span class="line">www     A       192.168.232.135</span><br><span class="line">xixi    A       192.168.232.136</span><br><span class="line">blog    CNAME   www.hym.com.</span><br><span class="line"></span><br><span class="line">[root@hym ~]# vim /var/named/192.168.232.zone</span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@       IN SOA  ns2.hym.com.  admin.hym.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      ns2.hym.com.</span><br><span class="line">133     PTR     ns.hym.com.</span><br><span class="line">134     PTR     ns2.hym.com.</span><br><span class="line">135     PTR     www.hym.com.</span><br><span class="line">136     PTR     xixi.hym.com.</span><br><span class="line">137     PTR     haha.hym.com.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>重启服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#主</span></span><br><span class="line">[root@hym ~]# systemctl restart named</span><br><span class="line"><span class="comment">#从</span></span><br><span class="line">[root@1010 ~]# systemctl restart named</span><br></pre></td></tr></table></figure>

<p><strong>测试（从机）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看文件变化</span></span><br><span class="line">[root@1010 ~]# tree /var/named/</span><br><span class="line">/var/named/</span><br><span class="line">├── 192.168.232.zone</span><br><span class="line">├── data</span><br><span class="line">│   └── named.run</span><br><span class="line">├── dynamic</span><br><span class="line">│   ├── managed-keys.bind</span><br><span class="line">│   └── managed-keys.bind.jnl</span><br><span class="line">├── hym.com.zone</span><br><span class="line">├── named.ca</span><br><span class="line">├── named.empty</span><br><span class="line">├── named.localhost</span><br><span class="line">├── named.loopback</span><br><span class="line">└── slaves</span><br><span class="line">    ├── 192.168.232.zone</span><br><span class="line">    └── hym.com.zone</span><br><span class="line"></span><br><span class="line">3 directories, 11 files</span><br><span class="line"><span class="comment">#使用host测试</span></span><br><span class="line">[root@1010 ~]# host 192.168.232.136 192.168.232.3</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.3</span><br><span class="line">Address: 192.168.232.3#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">136.232.168.192.in-addr.arpa domain name pointer xixi.hym.com.</span><br><span class="line">[root@1010 ~]# host xixi.hym.com 192.168.232.3</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.3</span><br><span class="line">Address: 192.168.232.3#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">xixi.hym.com has address 192.168.232.136</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_17-49-24.png" alt="PixPin_2025-11-06_17-49-24"></p>
<h4 id="2-4-2-增量同步（正反向解析同理）"><a href="#2-4-2-增量同步（正反向解析同理）" class="headerlink" title="2.4.2.增量同步（正反向解析同理）"></a>2.4.2.增量同步（正反向解析同理）</h4><p><strong>添加记录（主机）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# vim /var/named/hym.com.zone</span><br><span class="line">haha    A       192.168.232.137 ;新增加</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_16-17-04.png" alt="PixPin_2025-11-06_16-17-04"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@hym ~]# systemctl restart named</span><br></pre></td></tr></table></figure>

<p><strong>进行增量同步并测试（从机）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#同步</span></span><br><span class="line">[root@1010 ~]# rndc refresh hym.com.</span><br><span class="line">zone refresh queued</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# host haha.hym.com 192.168.232.3</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 192.168.232.3</span><br><span class="line">Address: 192.168.232.3#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">haha.hym.com has address 192.168.232.137</span><br></pre></td></tr></table></figure>

<p> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_16-18-59.png" alt="PixPin_2025-11-06_16-18-59"></p>
<h1 id="25-11-6-NFS"><a href="#25-11-6-NFS" class="headerlink" title="25-11-6(NFS)"></a>25-11-6(NFS)</h1><h2 id="1-NFS理论"><a href="#1-NFS理论" class="headerlink" title="1.NFS理论"></a>1.NFS理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/06nfs%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-NFS实验"><a href="#2-NFS实验" class="headerlink" title="2.NFS实验"></a>2.NFS实验</h2><h3 id="2-1-安装-两端"><a href="#2-1-安装-两端" class="headerlink" title="2.1.安装(两端)"></a>2.1.安装(两端)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# dnf install nfs-utils rpcbind -y</span><br></pre></td></tr></table></figure>

<h3 id="2-2-服务端配置"><a href="#2-2-服务端配置" class="headerlink" title="2.2.服务端配置"></a>2.2.服务端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@hym ~]# vim /etc/exports</span><br><span class="line">/server/dir1    *(rw,root_squash)</span><br><span class="line">/server/dir2    *(rw,all_squash,anonuid=10000,anongid=10000)</span><br><span class="line"><span class="comment">#创建对应目录</span></span><br><span class="line">[root@hym ~]# <span class="built_in">mkdir</span> /server</span><br><span class="line">[root@hym ~]# <span class="built_in">mkdir</span> /server/dir&#123;1,2&#125;</span><br><span class="line">[root@hym ~]# tree /server/</span><br><span class="line">/server/</span><br><span class="line">├── dir1</span><br><span class="line">└── dir2</span><br><span class="line"><span class="comment">#给予权限</span></span><br><span class="line">[root@hym ~]# <span class="built_in">chmod</span> 755 -R /server/</span><br><span class="line"><span class="comment">#根据配置文件进行补充，比如用户权限</span></span><br><span class="line">[root@hym ~]# useradd -u 10000 hym</span><br><span class="line">[root@hym ~]# <span class="built_in">id</span> hym</span><br><span class="line">用户<span class="built_in">id</span>=10000(hym) 组<span class="built_in">id</span>=10000(hym) 组=10000(hym)</span><br><span class="line">[root@hym ~]# setfacl -m u:hym:rwx /server/dir2</span><br><span class="line"><span class="comment">#导出</span></span><br><span class="line">[root@hym ~]# exportfs -ar</span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">[root@hym ~]# systemctl start nfs-server</span><br><span class="line"><span class="comment">#验证共享配置</span></span><br><span class="line">[root@hym ~]# showmount -e localhost</span><br><span class="line">Export list <span class="keyword">for</span> localhost:</span><br><span class="line">/server/dir2 *</span><br><span class="line">/server/dir1 *</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_23-09-50.png" alt="PixPin_2025-11-06_23-09-50"></p>
<h3 id="2-3-客户端配置"><a href="#2-3-客户端配置" class="headerlink" title="2.3.客户端配置"></a>2.3.客户端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试服务端共享</span></span><br><span class="line">[root@1010 ~]# showmount -e 192.168.232.133</span><br><span class="line">Export list <span class="keyword">for</span> 192.168.232.133:</span><br><span class="line">/server/dir2 *</span><br><span class="line">/server/dir1 *</span><br><span class="line"><span class="comment">#创建本地挂载点</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /bendi</span><br><span class="line">[root@1010 ~]# <span class="built_in">mkdir</span> /bendi/dir&#123;1,2&#125;</span><br><span class="line">[root@1010 ~]# tree /bendi/</span><br><span class="line">/bendi/</span><br><span class="line">├── dir1</span><br><span class="line">└── dir2</span><br><span class="line"><span class="comment">#挂载</span></span><br><span class="line">[root@1010 ~]# mount -t nfs 192.168.232.133:/server/dir1 /bendi/dir1</span><br><span class="line">[root@1010 ~]# mount -t nfs 192.168.232.133:/server/dir2 /bendi/dir2</span><br><span class="line"><span class="comment">#查看挂载状态</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">df</span> -h</span><br><span class="line">文件系统                      容量  已用  可用 已用% 挂载点</span><br><span class="line">devtmpfs                      4.0M     0  4.0M    0% /dev</span><br><span class="line">tmpfs                         866M     0  866M    0% /dev/shm</span><br><span class="line">tmpfs                         347M  5.1M  342M    2% /run</span><br><span class="line">/dev/mapper/rhel-root          17G  1.7G   15G   11% /</span><br><span class="line">/dev/nvme0n1p2                960M  217M  744M   23% /boot</span><br><span class="line">/dev/nvme0n1p1                599M  7.0M  592M    2% /boot/efi</span><br><span class="line">/dev/sr0                      9.9G  9.9G     0  100% /mnt</span><br><span class="line">tmpfs                         174M     0  174M    0% /run/user/0</span><br><span class="line">192.168.232.133:/server/dir1   17G  1.7G   15G   11% /bendi/dir1</span><br><span class="line">192.168.232.133:/server/dir2   17G  1.7G   15G   11% /bendi/dir2</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&quot;dir1&quot;</span> &gt; /bendi/dir1/test.txt</span><br><span class="line">-bash: /bendi/dir1/test.txt: 权限不够</span><br><span class="line">[root@1010 ~]# ll -d /bendi/dir1</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 21:53 /bendi/dir1</span><br><span class="line">[root@1010 ~]# <span class="built_in">echo</span> <span class="string">&quot;dir2&quot;</span> &gt; /bendi/dir2/test.txt</span><br><span class="line">[root@1010 ~]# ll /bendi/dir2/test.txt </span><br><span class="line">-rw-r--r--. 1 10000 10000 5 11月  6 21:48 /bendi/dir2/test.txt</span><br><span class="line"><span class="comment">####dir1的权限不足，只能查看，dir2的权限给了rw所以客户端能够创建文件</span></span><br><span class="line"><span class="comment">####dir1的权限为可读，dir2目录hym用户权限为可读可写</span></span><br><span class="line"><span class="comment">###dir1需要写权限时，可在服务端修改对应目录权限</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_22-16-46.png" alt="PixPin_2025-11-06_22-16-46"></p>
<h3 id="2-4-开机挂载"><a href="#2-4-开机挂载" class="headerlink" title="2.4.开机挂载"></a>2.4.开机挂载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/fstab</span><br><span class="line">192.168.232.133:/server/dir1  /bendi/dir1       nfs     defaults        0 0</span><br><span class="line">192.168.232.133:/server/dir2  /bendi/dir2       nfs     defaults        0 0</span><br><span class="line"><span class="comment">#立即生效</span></span><br><span class="line">[root@1010 ~]# mount -a</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_22-49-25.png" alt="PixPin_2025-11-06_22-49-25"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_22-49-12.png" alt="PixPin_2025-11-06_22-49-12"></p>
<h3 id="2-5-动态挂载-无进程时会自动卸载"><a href="#2-5-动态挂载-无进程时会自动卸载" class="headerlink" title="2.5.动态挂载(无进程时会自动卸载)"></a>2.5.动态挂载(无进程时会自动卸载)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#客户端安装 autofs</span></span><br><span class="line">[root@1010 ~]# yum install autofs -y</span><br><span class="line"><span class="comment">#编辑主配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/auto.misc</span><br><span class="line">/nfs_auto       /etc/auto.misc</span><br><span class="line"><span class="comment">#编辑子配置文件</span></span><br><span class="line">[root@1010 ~]# vim /etc/auto.misc</span><br><span class="line">dir1            -fstype=nfs 192.168.232.133:/server/dir1</span><br><span class="line">dir2            -fstype=nfs 192.168.232.133:/server/dir2</span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">[root@1010 ~]# systemctl start autofs</span><br><span class="line"><span class="comment">#访问挂载点实现动态挂载</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">ls</span> /nfs_auto/dir1</span><br><span class="line">hy</span><br><span class="line">[root@1010 ~]# <span class="built_in">ls</span> /nfs_auto/dir2</span><br><span class="line">test.txt</span><br><span class="line"><span class="comment">#查看挂载状态</span></span><br><span class="line">[root@1010 ~]# <span class="built_in">df</span> -h</span><br><span class="line">文件系统                      容量  已用  可用 已用% 挂载点</span><br><span class="line">devtmpfs                      4.0M     0  4.0M    0% /dev</span><br><span class="line">tmpfs                         866M     0  866M    0% /dev/shm</span><br><span class="line">tmpfs                         347M  6.5M  340M    2% /run</span><br><span class="line">/dev/mapper/rhel-root          17G  1.7G   15G   11% /</span><br><span class="line">/dev/nvme0n1p2                960M  217M  744M   23% /boot</span><br><span class="line">/dev/nvme0n1p1                599M  7.0M  592M    2% /boot/efi</span><br><span class="line">/dev/sr0                      9.9G  9.9G     0  100% /mnt</span><br><span class="line">tmpfs                         174M     0  174M    0% /run/user/0</span><br><span class="line">192.168.232.133:/server/dir1   17G  1.7G   15G   11% /bendi/dir1</span><br><span class="line">192.168.232.133:/server/dir2   17G  1.7G   15G   11% /bendi/dir2</span><br><span class="line">192.168.232.133:/server/dir1   17G  1.7G   15G   11% /nfs_auto/dir1</span><br><span class="line">192.168.232.133:/server/dir2   17G  1.7G   15G   11% /nfs_auto/dir2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_22-57-35.png" alt="PixPin_2025-11-06_22-57-35"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_22-59-45.png" alt="PixPin_2025-11-06_22-59-45"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_23-02-31.png" alt="PixPin_2025-11-06_23-02-31"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改卸载时间(默认300s)</span></span><br><span class="line">[root@1010 ~]# vim /etc/autofs.conf</span><br><span class="line"><span class="built_in">timeout</span> = 300</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-06_23-07-52.png" alt="PixPin_2025-11-06_23-07-52"></p>
<h1 id="25-11-13-SELiunx"><a href="#25-11-13-SELiunx" class="headerlink" title="25-11-13(SELiunx)"></a>25-11-13(SELiunx)</h1><h2 id="1-SELiunx理论"><a href="#1-SELiunx理论" class="headerlink" title="1.SELiunx理论"></a>1.SELiunx理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/07SeLinux.md">跳转</a> </p>
<p>SELinux 是一种强制访问控制（MAC）安全机制，作为 Linux 内核的安全模块，它弥补了传统 Linux 自主访问控制的缺陷，从内核层面强化系统安全。</p>
<p><strong>工作过程</strong></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d1aa036.webp.li/Build/20130809153255828" alt="img"></p>
<p><strong>三种工作模式</strong></p>
<table>
<thead>
<tr>
<th>模式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>enforcing</td>
<td>强制模式，正常加载并执行策略，拦截违规访问并记录日志</td>
</tr>
<tr>
<td>permissive</td>
<td>宽容模式，不拦截违规操作，仅记录日志，常用于调试策略</td>
</tr>
<tr>
<td>disabled</td>
<td>关闭模式，SELinux 完全不生效</td>
</tr>
</tbody></table>
<h2 id="2-SELiunx实验"><a href="#2-SELiunx实验" class="headerlink" title="2.SELiunx实验"></a>2.SELiunx实验</h2><h3 id="2-1-实验1：SELiunx端口限制实践"><a href="#2-1-实验1：SELiunx端口限制实践" class="headerlink" title="2.1.实验1：SELiunx端口限制实践"></a>2.1.实验1：SELiunx端口限制实践</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#前置</span></span><br><span class="line">systemctl start nginx</span><br><span class="line">setroubleshoot	<span class="comment"># 提供解决方案</span></span><br><span class="line"><span class="comment">#检查</span></span><br><span class="line">[root@server ~]# systemctl status nginx</span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">[root@server ~]# ps -axZ | grep nginx</span><br><span class="line">[root@server ~]# systemctl stop nginx</span><br><span class="line">[root@server ~]# semanage port -l | grep http</span><br><span class="line"><span class="comment">#修改配置文件</span></span><br><span class="line">[root@server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen  84;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">[root@server ~]# systemctl start nginx</span><br><span class="line">Job <span class="keyword">for</span> nginx.service failed because the control process exited with error code.</span><br><span class="line">See <span class="string">&quot;systemctl status nginx.service&quot;</span> and <span class="string">&quot;journalctl -xeu nginx.service&quot;</span> <span class="keyword">for</span> details.</span><br><span class="line">[root@server ~]# dnf install setroubleshoot</span><br><span class="line"><span class="comment">#查看日志</span></span><br><span class="line">[root@server ~]# <span class="built_in">tail</span> -f /var/log/messages</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-21_00-17-36.png" alt="PixPin_2025-11-21_00-17-36"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据日志进行配置</span></span><br><span class="line">[root@server ~]# semanage port -a -t http_port_t -p tcp 82</span><br><span class="line">[root@server ~]# semanage port -l | grep http</span><br><span class="line">[root@server ~]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="2-2-实验2：SELiunx类型限制实践-管理安全上下文"><a href="#2-2-实验2：SELiunx类型限制实践-管理安全上下文" class="headerlink" title="2.2.实验2：SELiunx类型限制实践-管理安全上下文"></a>2.2.实验2：SELiunx类型限制实践-管理安全上下文</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#更改SELinux模式为Permissive</span></span><br><span class="line">[root@server ~]# setenforce 0</span><br><span class="line">[root@server ~]# getenforce</span><br><span class="line">Permissive</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建网页页面</span></span><br><span class="line">[root@server ~]# <span class="built_in">mkdir</span> /web</span><br><span class="line">[root@server ~]# <span class="built_in">echo</span> “SELiunx 82” &gt; /web/index.html</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改nginx配置</span></span><br><span class="line">[root@server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">        listen       82;</span><br><span class="line">        root         /web;</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-21_23-34-19.png" alt="PixPin_2025-11-21_23-34-19"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">[root@server ~]# systemctl restart nginx.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改SELinux模式为Enforcing</span></span><br><span class="line">[root@server ~]# setenforce 1</span><br><span class="line">[root@server ~]# getenforce </span><br><span class="line">Enforcing</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看日志</span></span><br><span class="line">[root@server ~]# <span class="built_in">tail</span> -f /var/log/messages</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试curl网页</span></span><br><span class="line">[root@server ~]# curl 192.168.232.133:82</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.20.1&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="comment">#发现失败，返回403</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-21_23-39-36.png" alt="PixPin_2025-11-21_23-39-36"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看日志报错</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-21_23-40-49.png" alt="PixPin_2025-11-21_23-40-49"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据日志报错修改index文件标签</span></span><br><span class="line">[root@server ~]# semanage fcontext -a -t httpd_sys_content_t <span class="string">&#x27;/web/index.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看文件</span></span><br><span class="line">[root@server ~]# restorecon  -R  -v  /web/index.html</span><br><span class="line">Relabeled /web/index.html from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0</span><br><span class="line"></span><br><span class="line"><span class="comment">#重新测试</span></span><br><span class="line">[root@server ~]# curl 192.168.232.133:82</span><br><span class="line">SELiunx 82</span><br></pre></td></tr></table></figure>

<h3 id="2-3-实验3：SELiunx类型限制实践"><a href="#2-3-实验3：SELiunx类型限制实践" class="headerlink" title="2.3.实验3：SELiunx类型限制实践"></a>2.3.实验3：SELiunx类型限制实践</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装与启动</span></span><br><span class="line">[root@server ~]# dnf install  nginx  -y </span><br><span class="line">[root@server ~]# yum install setroubleshoot -y</span><br><span class="line">[root@server ~]# systemctl start nginx</span><br><span class="line">[root@server ~]# systemctl start setroubleshootd.service </span><br><span class="line"></span><br><span class="line">[root@server ~]# <span class="built_in">mkdir</span> -p /web/http</span><br><span class="line">[root@server ~]# <span class="built_in">echo</span> <span class="string">&quot;SELinux 84&quot;</span> &gt; /web/http/index.html</span><br><span class="line">[root@server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       84</span><br><span class="line">        root         /web/http;</span><br><span class="line">        &#125;</span><br><span class="line">[root@server ~]# systemctl restart nginx.service </span><br><span class="line">Job <span class="keyword">for</span> nginx.service failed because the control process exited with error code.</span><br><span class="line">See <span class="string">&quot;systemctl status nginx.service&quot;</span> and <span class="string">&quot;journalctl -xeu nginx.service&quot;</span> <span class="keyword">for</span> details.     </span><br><span class="line">[root@server ~]# semanage port -a -t http_port_t -p tcp 84</span><br><span class="line">[root@server ~]# systemctl restart nginx.service </span><br><span class="line"></span><br><span class="line">[root@server ~]# curl 192.168.232.133:84</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;<span class="built_in">head</span>&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx/1.20.1&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">[root@server ~]# semanage fcontext -a -t httpd_sys_content_t  <span class="string">&#x27;/web/http/index.html&#x27;</span></span><br><span class="line">[root@server ~]# systemctl restart nginx.service </span><br><span class="line">[root@server ~]# curl 192.168.232.133:84</span><br><span class="line">SELinux 84</span><br></pre></td></tr></table></figure>



<h1 id="25-11-15-iptables-firewall"><a href="#25-11-15-iptables-firewall" class="headerlink" title="25-11-15(iptables&#x2F;firewall)"></a>25-11-15(iptables&#x2F;firewall)</h1><h2 id="1-防火墙理论"><a href="#1-防火墙理论" class="headerlink" title="1.防火墙理论"></a>1.防火墙理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/08%E9%98%B2%E7%81%AB%E5%A2%99%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h3 id="1-1-iptables基本命令"><a href="#1-1-iptables基本命令" class="headerlink" title="1.1.iptables基本命令"></a>1.1.iptables基本命令</h3><p><strong>安装iptables</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、RHEL9默认使用firewalld，需先禁用firewalld并安装iptables服务：</span></span><br><span class="line">[root@hym ~]# systemctl stop firewalld</span><br><span class="line">[root@hym ~]# systemctl <span class="built_in">disable</span> --now firewalld</span><br><span class="line">[root@hym ~]# systemctl mask firewalld</span><br><span class="line"><span class="comment">#2、安装iptables</span></span><br><span class="line">dnf install iptables-services -y</span><br><span class="line">systemctl <span class="built_in">enable</span> --now iptables.service</span><br><span class="line">systemctl status iptables.service</span><br></pre></td></tr></table></figure>

<p><strong>增删改查</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.增加</span></span><br><span class="line"><span class="comment">#1.1追加到末尾</span></span><br><span class="line">   iptables -A INPUT -p tcp --dport 22 -j ACCEPT  <span class="comment">#允许SSH通过TCP 22端口（追加到INPUT链末尾）</span></span><br><span class="line"><span class="comment">#1.2插入规则到链的指定位置</span></span><br><span class="line">	iptables -I INPUT 2 -s 192.168.1.0/24 -j DROP  <span class="comment">#在INPUT链的第2条位置插入规则，丢弃来自192.168.1.0/24网段的所有流量</span></span><br><span class="line"><span class="comment">#1.3指定表（如filter表）插入规则</span></span><br><span class="line">	iptables -t filter -I FORWARD -d 192.168.10.182 -p tcp --dport 80:443 -j ACCEPT  <span class="comment">#允许目标为192.168.10.182的TCP 80-443端口流量通过FORWARD链</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.删除</span></span><br><span class="line">iptables -t 表名 -F 链名	<span class="comment">#清空指定链</span></span><br><span class="line">iptables -t 表名 -F	<span class="comment">#清空当前表的所有链(默认 `filter` 表)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.查询</span></span><br><span class="line">iptables -L -t filter -n  <span class="comment">#查看指定表</span></span><br><span class="line">iptables -L -nv   -t filter   --line-numbers 	<span class="comment">#查看所有链上的   指定表（ -t fileter ）的所有规则</span></span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/iptables   <span class="comment">#规则链存储文件</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>相关命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看指定表</span></span><br><span class="line">[root@localhost ~]# iptables -L -t mangle  -n</span><br><span class="line">[root@localhost ~]# iptables -L -t nat -n</span><br><span class="line">[root@localhost ~]# iptables -L -t raw -n </span><br><span class="line">[root@localhost ~]# iptables -L -t filter -n</span><br><span class="line"></span><br><span class="line"><span class="comment">#规则链存储文件</span></span><br><span class="line">vim /etc/sysconfig/iptables</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看所有链上的   指定表（ -t fileter ）的所有规则</span></span><br><span class="line"> iptables -L -nv   -t filter   --line-numbers</span><br></pre></td></tr></table></figure>

<h2 id="2-防火墙实验"><a href="#2-防火墙实验" class="headerlink" title="2.防火墙实验"></a>2.防火墙实验</h2><h3 id="2-1-firewall实验"><a href="#2-1-firewall实验" class="headerlink" title="2.1.firewall实验"></a>2.1.firewall实验</h3><h4 id="2-1-1-firewalld区域添加http服务，使其为放行状态"><a href="#2-1-1-firewalld区域添加http服务，使其为放行状态" class="headerlink" title="2.1.1.firewalld区域添加http服务，使其为放行状态"></a>2.1.1.firewalld区域添加http服务，使其为放行状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装nginxa</span></span><br><span class="line">[root@server ~]# dnf install -y nginx</span><br><span class="line">[root@server ~]# <span class="built_in">echo</span> <span class="string">&quot;firewalld&quot;</span> &gt; /usr/share/nginx/html/index.html</span><br><span class="line">[root@server ~]# systemctl restart nginx.service</span><br><span class="line"></span><br><span class="line">[root@server ~]# firewall-cmd --get-default-zone </span><br><span class="line">public</span><br><span class="line">[root@server ~]# firewall-cmd --list-all</span><br><span class="line">public (active)</span><br><span class="line">  target: default</span><br><span class="line">  icmp-block-inversion: no</span><br><span class="line">  interfaces: ens160</span><br><span class="line">  sources: </span><br><span class="line">  services: cockpit dhcpv6-client ssh</span><br><span class="line">  ports: </span><br><span class="line">  protocols: </span><br><span class="line">  forward: <span class="built_in">yes</span></span><br><span class="line">  masquerade: no</span><br><span class="line">  forward-ports: </span><br><span class="line">  source-ports: </span><br><span class="line">  icmp-blocks: </span><br><span class="line">  rich rules: </span><br><span class="line">  </span><br><span class="line">  [root@server ~]# firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd --permanent --zone=public --add-port=80/tcp</span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd --reload </span><br><span class="line">success</span><br><span class="line"></span><br><span class="line">[root@server ~]# firewall-cmd --list-all</span><br><span class="line">public (active)</span><br><span class="line">  target: default</span><br><span class="line">  icmp-block-inversion: no</span><br><span class="line">  interfaces: ens160</span><br><span class="line">  sources: </span><br><span class="line">  services: cockpit dhcpv6-client http ssh</span><br><span class="line">  ports: 80/tcp</span><br><span class="line">  protocols: </span><br><span class="line">  forward: <span class="built_in">yes</span></span><br><span class="line">  masquerade: no</span><br><span class="line">  forward-ports: </span><br><span class="line">  source-ports: </span><br><span class="line">  icmp-blocks: </span><br><span class="line">  rich rules:</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-某些服务需要编辑zone文件才能添加服务，添加nginx服务"><a href="#2-1-2-某些服务需要编辑zone文件才能添加服务，添加nginx服务" class="headerlink" title="2.1.2.某些服务需要编辑zone文件才能添加服务，添加nginx服务"></a>2.1.2.某些服务需要编辑zone文件才能添加服务，添加nginx服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> firewall-cmd   --add-service=nginx  --permanent# 查看所有区域支持的服务</span><br><span class="line">[root@server ~]# firewall-cmd   --get-services</span><br><span class="line"></span><br><span class="line">[root@server ~]#  firewall-cmd --permanent  --add-service=nginx  </span><br><span class="line">Error: INVALID_SERVICE: Zone <span class="string">&#x27;public&#x27;</span>: <span class="string">&#x27;nginx&#x27;</span> not among existing services</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@server ~]# <span class="built_in">cp</span> -a  /usr/lib/firewalld/services/http.xml    /usr/lib/firewalld/services/nginx.xml</span><br><span class="line">[root@server ~]# vim /usr/lib/firewalld/services/nginx.xml</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;service&gt;</span><br><span class="line">  &lt;short&gt;nginx&lt;/short&gt;</span><br><span class="line">  &lt;description&gt;&lt;/description&gt;</span><br><span class="line">  &lt;port protocol=<span class="string">&quot;tcp&quot;</span> port=<span class="string">&quot;80&quot;</span>/&gt;</span><br><span class="line">  &lt;port protocol=<span class="string">&quot;tcp&quot;</span> port=<span class="string">&quot;443&quot;</span>/&gt;</span><br><span class="line">&lt;/service&gt;</span><br><span class="line"></span><br><span class="line">[root@server ~]#  firewall-cmd --permanent  --add-service=nginx</span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd   --reload </span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd  --zone=public  --list-service</span><br><span class="line">cockpit dhcpv6-client http nginx ssh</span><br><span class="line">[root@server ~]# firewall-cmd --list-all</span><br><span class="line">public (active)</span><br><span class="line">  target: default</span><br><span class="line">  icmp-block-inversion: no</span><br><span class="line">  interfaces: ens160</span><br><span class="line">  sources: </span><br><span class="line">  services: cockpit dhcpv6-client http nginx ssh</span><br><span class="line">  ports: 80/tcp</span><br><span class="line">  protocols: </span><br><span class="line">  forward: <span class="built_in">yes</span></span><br><span class="line">  masquerade: no</span><br><span class="line">  forward-ports: </span><br><span class="line">  source-ports: </span><br><span class="line">  icmp-blocks: </span><br><span class="line">  rich rules:</span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-禁止192-168-48-0-24-网段的地址进行ping"><a href="#2-1-3-禁止192-168-48-0-24-网段的地址进行ping" class="headerlink" title="2.1.3.禁止192.168.48.0&#x2F;24 网段的地址进行ping"></a>2.1.3.禁止192.168.48.0&#x2F;24 网段的地址进行ping</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]# man firewalld.richlanguage</span><br><span class="line"></span><br><span class="line">[root@server ~]# firewall-cmd  --permanent  --add-rich-rule=<span class="string">&#x27;rule  family=&quot;ipv4&quot;  source address=&quot;192.168.232.0/24&quot; protocol  value=&quot;icmp&quot;  reject&#x27;</span></span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd  --reload</span><br><span class="line">success</span><br><span class="line"><span class="comment">#测试</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-22_14-24-30.png" alt="PixPin_2025-11-22_14-24-30"></p>
<h4 id="2-1-4-端口转发"><a href="#2-1-4-端口转发" class="headerlink" title="2.1.4.端口转发"></a>2.1.4.端口转发</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]# dnf install net-tools -y</span><br><span class="line">[root@server ~]# netstat  -lntup | grep nginx</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      1783/nginx: master  </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      1783/nginx: master </span><br><span class="line">[root@server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">[root@server ~]# setenforce 0       </span><br><span class="line">[root@server ~]# systemctl restart nginx.service </span><br><span class="line">[root@server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">[root@server ~]# setenforce 0</span><br><span class="line">[root@server ~]# systemctl res</span><br><span class="line">rescue        reset-failed  restart       </span><br><span class="line">[root@server ~]# systemctl restart nginx.service </span><br><span class="line">[root@server ~]# firewall-cmd  --permanent --add-rich-rule=<span class="string">&#x27;rule family=&quot;ipv4&quot; source address=&quot;192.168.232.1&quot; forward-port port=&quot;80&quot; protocol=&quot;tcp&quot; to-port=&quot;99&quot;&#x27;</span></span><br><span class="line">success</span><br><span class="line">[root@server ~]# firewall-cmd  --reload</span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-11-22_14-46-55.png" alt="PixPin_2025-11-22_14-46-55"></p>
<h1 id="25-12-3-LNMP"><a href="#25-12-3-LNMP" class="headerlink" title="25-12-3(LNMP)"></a>25-12-3(LNMP)</h1><h2 id="1-LNMP理论"><a href="#1-LNMP理论" class="headerlink" title="1.LNMP理论"></a>1.LNMP理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/09LNMP%E6%90%AD%E5%BB%BA%E8%AE%BA%E5%9D%9B.md">跳转</a></p>
<h2 id="2-LNMP搭建实验"><a href="#2-LNMP搭建实验" class="headerlink" title="2.LNMP搭建实验"></a>2.LNMP搭建实验</h2><h3 id="2-1-编写脚本"><a href="#2-1-编写脚本" class="headerlink" title="2.1.编写脚本"></a>2.1.编写脚本</h3><h4 id="2-1-1-基础配置脚本sys-sh"><a href="#2-1-1-基础配置脚本sys-sh" class="headerlink" title="2.1.1.基础配置脚本sys.sh"></a>2.1.1.基础配置脚本sys.sh</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sys.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#1.安装基础软件</span></span><br><span class="line"><span class="function"><span class="title">install_app</span></span>() &#123;</span><br><span class="line">        yum install httpd mariadb-server php php-fpm php-mysqlnd nginx -y &gt;/dev/null</span><br><span class="line">        yum install zip -y &gt;/dev/null</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#2.创建目录</span></span><br><span class="line"><span class="function"><span class="title">dir_create</span></span>() &#123;</span><br><span class="line">        <span class="built_in">mkdir</span> -p /web/ssl /web/www</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#3.创建https证书</span></span><br><span class="line"><span class="function"><span class="title">ssl</span></span>() &#123;</span><br><span class="line">        openssl genrsa --out /web/ssl/ssl.key</span><br><span class="line">        openssl req -utf8 -new -key /web/ssl/ssl.key -x509 -days 100 -out /web/ssl/ssl.crt \</span><br><span class="line">        -subj <span class="string">&quot;/C=CN/ST=HuNan/L=Changsha/O=./OU=./CN=www.hym.com/emailAddress=admin@hym.com&quot;</span> &gt;/dev/null</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#4.http前置</span></span><br><span class="line"><span class="function"><span class="title">http</span></span>() &#123;</span><br><span class="line">        unzip Dis* -d /web/www  &gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;解压成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;解压失败&quot;</span></span><br><span class="line">        <span class="built_in">cd</span> /web/www/upload/</span><br><span class="line">        <span class="built_in">chmod</span> -R 777 config/ uc_* data</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#关闭安全措施</span></span><br><span class="line"><span class="function"><span class="title">safe</span></span>() &#123;</span><br><span class="line">        setenforce 0</span><br><span class="line">        systemctl <span class="built_in">disable</span> --now firewalld &gt;/dev/null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-应用配置脚本app-sh"><a href="#2-1-2-应用配置脚本app-sh" class="headerlink" title="2.1.2.应用配置脚本app.sh"></a>2.1.2.应用配置脚本app.sh</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#app.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Nginx</span></span><br><span class="line"><span class="function"><span class="title">nginx_config</span></span>() &#123;</span><br><span class="line">        <span class="built_in">mv</span> /root/nginx.conf /etc/nginx/conf.d/nginx.conf &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        systemctl restart nginx &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#mysql</span></span><br><span class="line"><span class="function"><span class="title">mysql_config</span></span>() &#123;</span><br><span class="line">        systemctl start mariadb &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        mysql -u root -e <span class="string">&quot;</span></span><br><span class="line"><span class="string">        alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;passwd&#x27;;</span></span><br><span class="line"><span class="string">        create database luntan;</span></span><br><span class="line"><span class="string">        flush privileges; &quot;</span> &gt;/dev/null 2&gt;&amp;1 \</span><br><span class="line">        &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;你的数据库名为luntan,密码为passwd&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-运行脚本do-sh"><a href="#2-1-3-运行脚本do-sh" class="headerlink" title="2.1.3.运行脚本do.sh"></a>2.1.3.运行脚本do.sh</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#do.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">source</span> sys.sh</span><br><span class="line"><span class="built_in">source</span> app.sh</span><br><span class="line"><span class="comment">#关闭防火墙</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">safe</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> 防火墙关闭 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> 防火墙关闭 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#1.软件安装</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">install_app</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> 软件安装 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> 软件安装 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#2.创建目录</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">dir_create</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> 目录创建 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> 目录创建 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#3.创建https证书</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">ssl</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> 证书创建 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> 证书创建 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#4.http搭建</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">http</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> http配置 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> http配置 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#5.nginx配置</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">nginx_config</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> nginx配置 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> nginx配置 失败</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#6.mysql配置</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;==============&quot;</span></span><br><span class="line">mysql_config</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> mysql配置 成功</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> mysql配置 失败</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        root /web/www/upload;</span><br><span class="line">        include /etc/nginx/default.d/php.conf;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 443 ssl http2;</span><br><span class="line">        root /web/www/upload;</span><br><span class="line">        include /etc/nginx/default.d/php.conf;</span><br><span class="line"></span><br><span class="line">        ssl_certificate <span class="string">&quot;/web/ssl/ssl.crt&quot;</span>;</span><br><span class="line">        ssl_certificate_key <span class="string">&quot;/web/ssl/ssl.key&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-运行"><a href="#2-2-运行" class="headerlink" title="2.2.运行"></a>2.2.运行</h3><h4 id="2-2-1-准备文件"><a href="#2-2-1-准备文件" class="headerlink" title="2.2.1.准备文件"></a>2.2.1.准备文件</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-12-05_17-08-59.png" alt="PixPin_2025-12-05_17-08-59"></p>
<h4 id="2-2-2-运行shell脚本"><a href="#2-2-2-运行shell脚本" class="headerlink" title="2.2.2.运行shell脚本"></a>2.2.2.运行shell脚本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]# bash do.sh </span><br><span class="line">==============</span><br><span class="line">Removed <span class="string">&quot;/etc/systemd/system/multi-user.target.wants/firewalld.service&quot;</span>.</span><br><span class="line">Removed <span class="string">&quot;/etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service&quot;</span>.</span><br><span class="line">防火墙关闭 成功</span><br><span class="line">==============</span><br><span class="line">软件安装 成功</span><br><span class="line">==============</span><br><span class="line">目录创建 成功</span><br><span class="line">==============</span><br><span class="line">证书创建 成功</span><br><span class="line">==============</span><br><span class="line">解压成功</span><br><span class="line">http配置 成功</span><br><span class="line">==============</span><br><span class="line">nginx配置 成功</span><br><span class="line">==============</span><br><span class="line">你的数据库名为luntan,密码为passwd</span><br><span class="line">mysql配置 成功</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-12-05_17-16-50.png" alt="PixPin_2025-12-05_17-16-50"></p>
<h3 id="2-3-测试"><a href="#2-3-测试" class="headerlink" title="2.3.测试"></a>2.3.测试</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-12-05_17-17-42.png" alt="PixPin_2025-12-05_17-17-42"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-12-05_17-18-19.png" alt="PixPin_2025-12-05_17-18-19"></p>
<h1 id="25-12-13-SHELL"><a href="#25-12-13-SHELL" class="headerlink" title="25-12-13(SHELL)"></a>25-12-13(SHELL)</h1><h2 id="1-SHELL理论"><a href="#1-SHELL理论" class="headerlink" title="1.SHELL理论"></a>1.SHELL理论</h2><table>
<thead>
<tr>
<th>01 入门：</th>
<th align="center">02 变量：</th>
<th align="center">03 条件测试：</th>
<th align="center">04 流程判断：</th>
<th align="center">05 函数：</th>
<th align="center">06 数组：</th>
<th align="center">07 grep:</th>
<th align="center">08 sed:</th>
<th align="center">09 awk:</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_1SHELL01-%E5%85%A5%E9%97%A8.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_2SHELL02-%E5%8F%98%E9%87%8F.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_3SHELL03-%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95%20.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_4SHELL04-%E6%B5%81%E7%A8%8B%E5%88%A4%E6%96%AD.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_5SHELL05-%E5%87%BD%E6%95%B0.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_5SHELL05-%E6%95%B0%E7%BB%84.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_6SHELL06-grep.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_7SHELL07-sed.md">跳转</a></td>
<td align="center"><a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/10_8SHELL08-awk.md">跳转</a></td>
</tr>
</tbody></table>
<h2 id="2-SHELL实验"><a href="#2-SHELL实验" class="headerlink" title="2.SHELL实验:"></a>2.SHELL实验:</h2><h3 id="2-1-实验1：提示用户输入用户名称，判断用户是否存在。"><a href="#2-1-实验1：提示用户输入用户名称，判断用户是否存在。" class="headerlink" title="2.1.实验1：提示用户输入用户名称，判断用户是否存在。"></a>2.1.实验1：提示用户输入用户名称，判断用户是否存在。</h3><blockquote>
<p>附加要求：无论存在与否都初始化用户密码为redhat，如果用户不存在就创建用户，然后初始化密码为redhat</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@hym ~]# vim /check_user.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">passwd_init</span></span>() &#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;正在初始化密码...&quot;</span></span><br><span class="line">        passwd <span class="variable">$name</span> &lt;&lt;<span class="string">end &gt;/dev/null 2&gt;&amp;1</span></span><br><span class="line"><span class="string">        redhat</span></span><br><span class="line"><span class="string">        redhat</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;初始化成功，初始密码为redhat&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名称：&quot;</span> name</span><br><span class="line"><span class="built_in">id</span> <span class="variable">$name</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span> 已存在&quot;</span></span><br><span class="line">        passwd_init</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;正在创建用户<span class="variable">$name</span>&quot;</span></span><br><span class="line">        useradd <span class="variable">$name</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;用户<span class="variable">$name</span>创建成功.&quot;</span></span><br><span class="line">        passwd_init</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2026-01-13_23-06-17.png" alt="PixPin_2026-01-13_23-06-17"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2026-01-13_23-10-39.png" alt="PixPin_2026-01-13_23-10-39"></p>
<h3 id="2-1-实验2：创建一个简单的系统信息报告脚本，输出基本的系统状态信息"><a href="#2-1-实验2：创建一个简单的系统信息报告脚本，输出基本的系统状态信息" class="headerlink" title="2.1 实验2：创建一个简单的系统信息报告脚本，输出基本的系统状态信息"></a>2.1 实验2：创建一个简单的系统信息报告脚本，输出基本的系统状态信息</h3><blockquote>
<p>附加：当前登录用户名称、报告生成时间、磁盘使用情况、内存使用情况</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@hym shell]# vim sys.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#输出报告</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;====系统基本信息====&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前用户:&quot;</span></span><br><span class="line"><span class="built_in">whoami</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;----磁盘使用情况----&quot;</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;----内存使用情况----&quot;</span></span><br><span class="line">free -h</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;生成时间:&quot;</span></span><br><span class="line"><span class="built_in">date</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;====报告结束====&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2026-01-14_20-52-19.png" alt="PixPin_2026-01-14_20-52-19"></p>
<h3 id="2-2-实验3：检查文件"><a href="#2-2-实验3：检查文件" class="headerlink" title="2.2 实验3：检查文件"></a>2.2 实验3：检查文件</h3><blockquote>
<p>检查文件 <code>/etc/passwd</code>是否存在 <strong>并且</strong> 可读，如果两个条件都满足，则输出”文件存在且可读”，否则输出相应错误信息。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@hym shell]# vim check.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">file=<span class="string">&quot;/etc/passw&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -e <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ] &amp;&amp; [ -r <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$file</span> 存在且可读&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">        [ -e <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ] || <span class="string">&quot;<span class="variable">$file</span> 不存在&quot;</span></span><br><span class="line"></span><br><span class="line">        [ -r <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ] || <span class="string">&quot;<span class="variable">$file</span> 不可读&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">[root@hym shell]# bash check.sh</span><br><span class="line">/etc/passwd 存在且可读</span><br><span class="line"></span><br><span class="line">[root@hym shell]# bash check.sh</span><br><span class="line">check.sh:行4: /etc/passw 不存在: 没有那个文件或目录</span><br><span class="line">check.sh:行5: /etc/passw 不可读: 没有那个文件或目录</span><br></pre></td></tr></table></figure>



<h1 id="25-12-20-Ansible"><a href="#25-12-20-Ansible" class="headerlink" title="25-12-20(Ansible)"></a>25-12-20(Ansible)</h1><h2 id="1-Ansible理论"><a href="#1-Ansible理论" class="headerlink" title="1.Ansible理论"></a>1.Ansible理论</h2><p><strong>理论部分参考</strong>  <a target="_blank" rel="noopener" href="https://gitee.com/kaitumei/note/blob/master/Liunx/02RHCE/11ansiblemd%E7%90%86%E8%AE%BA.md">跳转</a></p>
<h2 id="2-Ansible实验"><a href="#2-Ansible实验" class="headerlink" title="2.Ansible实验:"></a>2.Ansible实验:</h2><h3 id="2-1-用ansible命令行实现nginx部署修改端口号"><a href="#2-1-用ansible命令行实现nginx部署修改端口号" class="headerlink" title="2.1.用ansible命令行实现nginx部署修改端口号"></a>2.1.用ansible命令行实现nginx部署修改端口号</h3><h5 id="2-1-1-建立连接"><a href="#2-1-1-建立连接" class="headerlink" title="2.1.1.建立连接"></a>2.1.1.建立连接</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]vim /hosts</span><br><span class="line">    [server]</span><br><span class="line">    192.168.232.134</span><br><span class="line">[root@client ~]vim /auth.yml    </span><br><span class="line">---</span><br><span class="line">- hosts: server          <span class="comment"># 目标主机组（对应你清单里的[newserver]）</span></span><br><span class="line">  gather_facts: no          <span class="comment"># 关闭事实收集（首次推送公钥时，受控节点可能未配置Python依赖）</span></span><br><span class="line">  vars:</span><br><span class="line">    ansible_ssh_pass: <span class="string">&quot;passwd&quot;</span></span><br><span class="line">    ansible_host_key_checking: False</span><br><span class="line">  tasks:</span><br><span class="line">    - name: 给root用户添加SSH公钥（Ansible管理）</span><br><span class="line">      authorized_key:</span><br><span class="line">        user: root                    <span class="comment"># 指定目标用户（必填）</span></span><br><span class="line">        state: present                <span class="comment"># 确保公钥存在（添加）</span></span><br><span class="line">        key: <span class="string">&quot;&#123;&#123; lookup(&#x27;file&#x27;, &#x27;/root/.ssh/id_rsa.pub&#x27;) &#125;&#125;&quot;</span>  <span class="comment"># 读取本地公钥</span></span><br><span class="line">[root@client ~]# ansible-playbook -i /hosts /auth.yml</span><br><span class="line"></span><br><span class="line">PLAY [server] ******************************************************************</span><br><span class="line"></span><br><span class="line">TASK [给root用户添加SSH公钥（Ansible管理）] ************************************</span><br><span class="line">changed: [192.168.232.134]</span><br><span class="line"></span><br><span class="line">PLAY RECAP *********************************************************************</span><br><span class="line">192.168.232.134            : ok=1    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0 </span><br></pre></td></tr></table></figure>

<h5 id="2-1-2-创建目录"><a href="#2-1-2-创建目录" class="headerlink" title="2.1.2.创建目录"></a>2.1.2.创建目录</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# vim file.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /ansible</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p /ansible/roles/warehouse/&#123;vars,tasks&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p /ansible/roles/safety/&#123;vars,tasks&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p /ansible/roles/web/&#123;vars,tasks&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">touch</span> /ansible/site.yml</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/PixPin_2025-12-20_19-31-39.png" alt="PixPin_2025-12-20_19-31-39"></p>
<h5 id="2-1-3-编写相关配置"><a href="#2-1-3-编写相关配置" class="headerlink" title="2.1.3.编写相关配置"></a>2.1.3.编写相关配置</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@client</span> <span class="string">~</span>]<span class="comment"># cat /ansible/site.yml </span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="number">192.168</span><span class="number">.232</span><span class="number">.134</span></span><br><span class="line">  <span class="attr">gather_facts:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">become:</span> <span class="literal">yes</span></span><br><span class="line">  <span class="attr">roles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">warehouse</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">safety</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">web</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@client</span> <span class="string">~</span>]<span class="comment"># vim /ansible/roles/warehouse/tasks/main.yml</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">挂载</span></span><br><span class="line">  <span class="attr">mount:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/mnt</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">/dev/sr0</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">mounted</span></span><br><span class="line">    <span class="attr">fstype:</span> <span class="string">iso9660</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">配置仓库源1</span></span><br><span class="line">  <span class="attr">yum_repository:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">cangku</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">base</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">base</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">yes</span></span><br><span class="line">    <span class="attr">gpgcheck:</span> <span class="literal">no</span></span><br><span class="line">    <span class="attr">baseurl:</span> <span class="string">/mnt/BaseOS</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">配置仓库源2</span></span><br><span class="line">  <span class="attr">yum_repository:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">cangku</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">yes</span></span><br><span class="line">    <span class="attr">gpgcheck:</span> <span class="literal">no</span></span><br><span class="line">    <span class="attr">baseurl:</span> <span class="string">/mnt/AppStream</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@client</span> <span class="string">~</span>]<span class="comment"># vim /ansible/roles/safety/tasks/main.yml</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SELinx设置宽容模式</span></span><br><span class="line">  <span class="attr">ansible.builtin.selinux:</span></span><br><span class="line">    <span class="attr">policy:</span> <span class="string">targeted</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">permissive</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">放行89端口</span></span><br><span class="line">  <span class="attr">ansible.builtin.firewalld:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">89</span><span class="string">/tcp</span></span><br><span class="line">    <span class="attr">permanent:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">immediate:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">enabled</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@client</span> <span class="string">~</span>]<span class="comment"># vim /ansible/roles/web/tasks/main.yml</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装nginx</span></span><br><span class="line">  <span class="attr">yum:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">启动nginx</span></span><br><span class="line">  <span class="attr">service:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">修改端口号</span></span><br><span class="line">  <span class="attr">lineinfile:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/etc/nginx/nginx.conf</span></span><br><span class="line">    <span class="attr">regexp:</span> <span class="string">&#x27;^(\s*)listen\s.*;&#x27;</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">&#x27;\1listen 89;&#x27;</span></span><br><span class="line">    <span class="attr">backup:</span> <span class="literal">yes</span></span><br><span class="line">    <span class="attr">backrefs:</span> <span class="literal">yes</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">重启配置</span></span><br><span class="line">  <span class="attr">systemd:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">restarted</span></span><br></pre></td></tr></table></figure>

<h5 id="2-1-4-测试"><a href="#2-1-4-测试" class="headerlink" title="2.1.4.测试"></a>2.1.4.测试</h5><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/image-20251220194237778.png" alt="image-20251220194237778"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://kaitumei.2345.plus">Kaitumei</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://kaitumei.2345.plus/2026/02/01/RHCE%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">http://kaitumei.2345.plus/2026/02/01/RHCE课程笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://kaitumei.2345.plus" target="_blank">Yumi-an</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/RHCE/">RHCE</a></div><div class="post-share"><div class="social-share" data-image="https://b5dbf24.webp.li/icons/RHCE.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width no-desc" href="/2026/02/01/Con-Nav-Item%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" title="搭建现代化浏览器导航站"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/Con-Nav-Item.png" onerror="onerror=null;src='/img/favicon.png'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">搭建现代化浏览器导航站</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/tx.jpg" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="avatar"/></div><div class="author-info-name">Kaitumei</div><div class="author-info-description">个人博客网站，记录笔记与项目</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kaitumei"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://qm.qq.com/q/OXzhqWfsoo" target="_blank" title="qq"><i class="fa-brands fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/2002252637?spm_id_from=333.1007.0.0" target="_blank" title="bilibili"><i class="fa-brands fa-bilibili" style="color: #ffc0cb;"></i></a><a class="social-icon" href="https://github.com/kaitumei" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:kaitumei@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><center>这是一个记录学习与技术的博客，希望与各位一同进步与成长。</center></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-16-SSH"><span class="toc-text">25-10-16(SSH)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SSH%E7%90%86%E8%AE%BA"><span class="toc-text">1.SSH理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SSH%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.SSH实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BF%AE%E6%94%B9SSH%E7%AB%AF%E5%8F%A3"><span class="toc-text">2.1 修改SSH端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%8B%92%E7%BB%9Droot%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-text">2.2 拒绝root用户远程登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%85%81%E8%AE%B8%E7%89%B9%E5%AE%9A%E7%94%A8%E6%88%B7ssh%E7%99%BB%E5%BD%95%EF%BC%8C%E5%85%B6%E4%BD%99%E7%94%A8%E6%88%B7%E6%97%A0%E6%B3%95%E7%99%BB%E5%BD%95%EF%BC%88%E5%8C%85%E6%8B%ACroot%E7%94%A8%E6%88%B7%EF%BC%89"><span class="toc-text">2.3 允许特定用户ssh登录，其余用户无法登录（包括root用户）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-liunx%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95liunx%E6%9C%8D%E5%8A%A1%E7%AB%AFroot%E7%94%A8%E6%88%B7"><span class="toc-text">2.4 liunx客户端通过密钥登录liunx服务端root用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-windows%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87%E7%A7%98%E9%92%A5%E7%99%BB%E5%BD%95linux%E6%9C%8D%E5%8A%A1%E7%AB%AFroot%E7%94%A8%E6%88%B7"><span class="toc-text">2.5 windows客户端通过秘钥登录linux服务端root用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-SSH%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86"><span class="toc-text">3. SSH协议原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B"><span class="toc-text">3.1 连接过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E4%B8%A4%E7%A7%8D%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F"><span class="toc-text">3.2 两种认证方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-18-at-crond"><span class="toc-text">25-10-18(at&#x2F;crond)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E7%90%86%E8%AE%BA"><span class="toc-text">1.计划任务理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1"><span class="toc-text">2.计划任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%B8%80%E6%AC%A1%E6%80%A7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E3%80%90at%E3%80%91"><span class="toc-text">2.1 一次性计划任务【at】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E5%AE%9E%E7%8E%B0%E5%BD%A2%E5%BC%8F"><span class="toc-text">2.1.1 实现形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%97%B6%E9%97%B4%E7%9A%84%E4%B9%A6%E5%86%99%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.1.2 时间的书写格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95"><span class="toc-text">2.1.3 黑白名单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">2.1.4 注意点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%91%A8%E6%9C%9F%E6%80%A7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E3%80%90crond%E3%80%91"><span class="toc-text">2.2 周期性计划任务【crond】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%AE%9E%E7%8E%B0%E5%BD%A2%E5%BC%8F"><span class="toc-text">2.2.1 实现形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E6%97%B6%E9%97%B4%E4%B9%A6%E5%86%99%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.2.2 时间书写格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95"><span class="toc-text">2.2.3 黑白名单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E6%89%A9%E5%B1%95-%E3%80%90run-parts%E3%80%91"><span class="toc-text">2.2.4 扩展 【run-parts】</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-23-chrony"><span class="toc-text">25-10-23(chrony)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ntp%E7%90%86%E8%AE%BA"><span class="toc-text">1.ntp理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ntp%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.ntp实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-chrony"><span class="toc-text">2.1.chrony</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%89%E8%A3%85%E4%B8%8E%E6%9F%A5%E7%9C%8B"><span class="toc-text">2.2.安装与查看</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%AE%9E%E9%AA%8C1%E2%80%94-%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4"><span class="toc-text">2.2.1 实验1—-同步时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E5%AE%9E%E9%AA%8C2%E2%80%94%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">2.2.2 实验2—搭建本地时间同步服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE%EF%BC%88192-168-232-3%EF%BC%89"><span class="toc-text">服务端配置（192.168.232.3）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5%EF%BC%88ping%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89"><span class="toc-text">(1) 网络检查（ping客户端）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%B7%B2%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1"><span class="toc-text">(2) 编辑配置文件(已安装服务)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88192-168-232-131%EF%BC%89"><span class="toc-text">客户端（192.168.232.131）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5"><span class="toc-text">(1) 网络检查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-text">(2) 软件安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%88%E6%97%B6%E9%97%B4%E6%BA%90%E6%94%B9%E4%B8%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%EF%BC%89"><span class="toc-text">(3) 配置文件（时间源改为服务端的）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%A3%80%E6%9F%A5"><span class="toc-text">(4) 检查</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-24-Nginx"><span class="toc-text">25-10-24(Nginx)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Nginx%E7%90%86%E8%AE%BA"><span class="toc-text">1 Nginx理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Nginx%E5%AE%9E%E9%AA%8C"><span class="toc-text">2 Nginx实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%9E%E9%AA%8C1%EF%BC%9ANginx%E5%9F%BA%E7%A1%80"><span class="toc-text">2.1 实验1：Nginx基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3%E3%80%81%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95%E3%80%81%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AEweb%E9%A1%B5%E9%9D%A2"><span class="toc-text">2.2 实验2：修改端口、默认目录、默认文件访问web页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80web%E9%A1%B5%E9%9D%A2"><span class="toc-text">多端口访问同一web页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95"><span class="toc-text">自定义默认目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E4%B8%8D%E5%90%8C%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AEweb%E9%A1%B5%E9%9D%A2"><span class="toc-text">通过不同文件访问web页面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%AE%9E%E9%AA%8C%E4%B8%89%EF%BC%9A%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3-%E7%9B%AE%E5%BD%95%E3%80%81IP%E3%80%81%E5%9F%9F%E5%90%8D-%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.3 实验三：基于不同端口(目录、IP、域名)访问不同页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.3.1 基于不同端口访问不同页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.3.2 基于不同目录访问不同页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8CIP%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.3.3 基于不同IP访问不同页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.3.4 基于不同域名访问不同页面</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-29-Web"><span class="toc-text">25-10-29(Web)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Web%E7%90%86%E8%AE%BA"><span class="toc-text">1.Web理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Web%E5%AE%9E%E9%AA%8C%EF%BC%9A"><span class="toc-text">2.Web实验：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85"><span class="toc-text">2.1.安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-text">2.2.访问控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E7%9A%84%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80%E9%A1%B5%E9%9D%A2"><span class="toc-text">2.2.1.基于不同用户的访问控制访问同一页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E7%9A%84%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E8%AE%BF%E9%97%AE-%E4%B8%8D%E5%90%8C%E7%9A%84%E9%A1%B5%E9%9D%A2"><span class="toc-text">2.2.2.基于不同的用户认证访问 不同的页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E5%9F%BA%E4%BA%8E%E6%BA%90ip%E7%9A%84%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-text">2.2.3 基于源ip的访问控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-https"><span class="toc-text">2.3 https</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E6%90%AD%E5%BB%BAnginx-ssl%E7%9A%84%E5%8A%A0%E5%AF%86%E8%AE%A4%E8%AF%81web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">2.3.1 搭建nginx+ssl的加密认证web服务器</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-10-31-DNS"><span class="toc-text">25-10-31(DNS)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-DNS%E7%90%86%E8%AE%BA"><span class="toc-text">1.DNS理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-DNF%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.DNF实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85-1"><span class="toc-text">2.1.安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%AD%A3%E5%90%91%E8%A7%A3%E6%9E%90"><span class="toc-text">2.2.正向解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%8F%8D%E5%90%91%E8%A7%A3%E6%9E%90"><span class="toc-text">2.3.反向解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5"><span class="toc-text">2.4.主从同步</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E5%AE%8C%E5%85%A8%E5%90%8C%E6%AD%A5"><span class="toc-text">2.4.1.完全同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%EF%BC%88%E6%AD%A3%E5%8F%8D%E5%90%91%E8%A7%A3%E6%9E%90%E5%90%8C%E7%90%86%EF%BC%89"><span class="toc-text">2.4.2.增量同步（正反向解析同理）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-11-6-NFS"><span class="toc-text">25-11-6(NFS)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-NFS%E7%90%86%E8%AE%BA"><span class="toc-text">1.NFS理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-NFS%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.NFS实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85-%E4%B8%A4%E7%AB%AF"><span class="toc-text">2.1.安装(两端)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="toc-text">2.2.服务端配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="toc-text">2.3.客户端配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%BC%80%E6%9C%BA%E6%8C%82%E8%BD%BD"><span class="toc-text">2.4.开机挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%8A%A8%E6%80%81%E6%8C%82%E8%BD%BD-%E6%97%A0%E8%BF%9B%E7%A8%8B%E6%97%B6%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%8D%B8%E8%BD%BD"><span class="toc-text">2.5.动态挂载(无进程时会自动卸载)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-11-13-SELiunx"><span class="toc-text">25-11-13(SELiunx)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SELiunx%E7%90%86%E8%AE%BA"><span class="toc-text">1.SELiunx理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SELiunx%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.SELiunx实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%9E%E9%AA%8C1%EF%BC%9ASELiunx%E7%AB%AF%E5%8F%A3%E9%99%90%E5%88%B6%E5%AE%9E%E8%B7%B5"><span class="toc-text">2.1.实验1：SELiunx端口限制实践</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%9E%E9%AA%8C2%EF%BC%9ASELiunx%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6%E5%AE%9E%E8%B7%B5-%E7%AE%A1%E7%90%86%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">2.2.实验2：SELiunx类型限制实践-管理安全上下文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%AE%9E%E9%AA%8C3%EF%BC%9ASELiunx%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6%E5%AE%9E%E8%B7%B5"><span class="toc-text">2.3.实验3：SELiunx类型限制实践</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-11-15-iptables-firewall"><span class="toc-text">25-11-15(iptables&#x2F;firewall)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%98%B2%E7%81%AB%E5%A2%99%E7%90%86%E8%AE%BA"><span class="toc-text">1.防火墙理论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-iptables%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">1.1.iptables基本命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%98%B2%E7%81%AB%E5%A2%99%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.防火墙实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-firewall%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.1.firewall实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-firewalld%E5%8C%BA%E5%9F%9F%E6%B7%BB%E5%8A%A0http%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BD%BF%E5%85%B6%E4%B8%BA%E6%94%BE%E8%A1%8C%E7%8A%B6%E6%80%81"><span class="toc-text">2.1.1.firewalld区域添加http服务，使其为放行状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%9F%90%E4%BA%9B%E6%9C%8D%E5%8A%A1%E9%9C%80%E8%A6%81%E7%BC%96%E8%BE%91zone%E6%96%87%E4%BB%B6%E6%89%8D%E8%83%BD%E6%B7%BB%E5%8A%A0%E6%9C%8D%E5%8A%A1%EF%BC%8C%E6%B7%BB%E5%8A%A0nginx%E6%9C%8D%E5%8A%A1"><span class="toc-text">2.1.2.某些服务需要编辑zone文件才能添加服务，添加nginx服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E7%A6%81%E6%AD%A2192-168-48-0-24-%E7%BD%91%E6%AE%B5%E7%9A%84%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8Cping"><span class="toc-text">2.1.3.禁止192.168.48.0&#x2F;24 网段的地址进行ping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-text">2.1.4.端口转发</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-12-3-LNMP"><span class="toc-text">25-12-3(LNMP)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-LNMP%E7%90%86%E8%AE%BA"><span class="toc-text">1.LNMP理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-LNMP%E6%90%AD%E5%BB%BA%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.LNMP搭建实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC"><span class="toc-text">2.1.编写脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E8%84%9A%E6%9C%ACsys-sh"><span class="toc-text">2.1.1.基础配置脚本sys.sh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE%E8%84%9A%E6%9C%ACapp-sh"><span class="toc-text">2.1.2.应用配置脚本app.sh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%ACdo-sh"><span class="toc-text">2.1.3.运行脚本do.sh</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%BF%90%E8%A1%8C"><span class="toc-text">2.2.运行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%87%86%E5%A4%87%E6%96%87%E4%BB%B6"><span class="toc-text">2.2.1.准备文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E8%BF%90%E8%A1%8Cshell%E8%84%9A%E6%9C%AC"><span class="toc-text">2.2.2.运行shell脚本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">2.3.测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-12-13-SHELL"><span class="toc-text">25-12-13(SHELL)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SHELL%E7%90%86%E8%AE%BA"><span class="toc-text">1.SHELL理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SHELL%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.SHELL实验:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E6%8F%90%E7%A4%BA%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E7%94%A8%E6%88%B7%E5%90%8D%E7%A7%B0%EF%BC%8C%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E3%80%82"><span class="toc-text">2.1.实验1：提示用户输入用户名称，判断用户是否存在。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%8A%A5%E5%91%8A%E8%84%9A%E6%9C%AC%EF%BC%8C%E8%BE%93%E5%87%BA%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E4%BF%A1%E6%81%AF"><span class="toc-text">2.1 实验2：创建一个简单的系统信息报告脚本，输出基本的系统状态信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E6%A3%80%E6%9F%A5%E6%96%87%E4%BB%B6"><span class="toc-text">2.2 实验3：检查文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#25-12-20-Ansible"><span class="toc-text">25-12-20(Ansible)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Ansible%E7%90%86%E8%AE%BA"><span class="toc-text">1.Ansible理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Ansible%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.Ansible实验:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%94%A8ansible%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E7%8E%B0nginx%E9%83%A8%E7%BD%B2%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-text">2.1.用ansible命令行实现nginx部署修改端口号</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1-%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5"><span class="toc-text">2.1.1.建立连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">2.1.2.创建目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-%E7%BC%96%E5%86%99%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-text">2.1.3.编写相关配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-4-%E6%B5%8B%E8%AF%95"><span class="toc-text">2.1.4.测试</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/07/hexo-deployment-troubleshooting/" title="Hexo博客进阶：自动化部署与采坑实录"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.kaitumei.com/default_cover.jpg" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="Hexo博客进阶：自动化部署与采坑实录"/></a><div class="content"><a class="title" href="/2026/02/07/hexo-deployment-troubleshooting/" title="Hexo博客进阶：自动化部署与采坑实录">Hexo博客进阶：自动化部署与采坑实录</a><time datetime="2026-02-07T16:30:00.000Z" title="发表于 2026-02-07 16:30:00">2026-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/05/hexo%E9%AD%94%E6%94%B9%E7%AF%87/" title="主题 Butterfly 5.5.4 魔改教程"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/hexo/butterfly.png" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="主题 Butterfly 5.5.4 魔改教程"/></a><div class="content"><a class="title" href="/2026/02/05/hexo%E9%AD%94%E6%94%B9%E7%AF%87/" title="主题 Butterfly 5.5.4 魔改教程">主题 Butterfly 5.5.4 魔改教程</a><time datetime="2026-02-05T10:00:00.000Z" title="发表于 2026-02-05 10:00:00">2026-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/04/front-mateer%E8%AF%B4%E6%98%8E/" title="主题 Butterfly 5.5.4 基础教程"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/hexo/butterfly.png" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="主题 Butterfly 5.5.4 基础教程"/></a><div class="content"><a class="title" href="/2026/02/04/front-mateer%E8%AF%B4%E6%98%8E/" title="主题 Butterfly 5.5.4 基础教程">主题 Butterfly 5.5.4 基础教程</a><time datetime="2026-02-04T15:04:07.000Z" title="发表于 2026-02-04 15:04:07">2026-02-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/02/%E4%BA%91%E5%8E%9F%E7%94%9F%E9%AB%98%E7%BA%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" title="云原生-Linux的高级部分笔记"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/yunyuansheng.png" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="云原生-Linux的高级部分笔记"/></a><div class="content"><a class="title" href="/2026/02/02/%E4%BA%91%E5%8E%9F%E7%94%9F%E9%AB%98%E7%BA%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" title="云原生-Linux的高级部分笔记">云原生-Linux的高级部分笔记</a><time datetime="2026-02-02T10:00:00.000Z" title="发表于 2026-02-02 10:00:00">2026-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/01/Con-Nav-Item%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" title="搭建现代化浏览器导航站"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/Con-Nav-Item.png" onerror="this.onerror=null;this.src='/img/favicon.png'" alt="搭建现代化浏览器导航站"/></a><div class="content"><a class="title" href="/2026/02/01/Con-Nav-Item%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" title="搭建现代化浏览器导航站">搭建现代化浏览器导航站</a><time datetime="2026-02-01T20:48:00.000Z" title="发表于 2026-02-01 20:48:00">2026-02-01</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2026 By Kaitumei</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="/js/tw_cn.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"placeholder":"欢迎留言，支持Markdown语法，快来评论吧~"}

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoojs-cyan.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoojs-cyan.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async src="/js/title.js"></script><script src="/js/card-welcome.js"></script><script>window.loaderConfig = { enable: true,  imageUrl: 'https://b5dbf24.webp.li/icons/404.gif',  text: '加载中...',  animationType: 'pulse', showProgress: true,  duration: 1000,  darkMode: false  };</script><script async src="/js/custom-loader.js"></script><script async src="/js/custom-nav.js"></script><script src="/js/custom.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async src="/js/categoryBar.js"></script><div id="nav-music"><meting-js id="2301697552" server="netease" type="playlist" mutex="true" preload="none" theme="#49b1f5" data-lrrc-type="0" order="random" list-folded="true"></meting-js></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="🔍搜索本站内容" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div><script>const posts = ["2026/02/01/Con-Nav-Item安装指南/","2026/02/01/PicGo图床搭建指南/","2026/02/04/front-mateer说明/","2026/02/07/hexo-deployment-troubleshooting/","2026/02/01/RHCE课程笔记/","2026/02/05/hexo魔改篇/","2026/02/02/云原生高级课程笔记/"]
function toRandomPost() {
  const randomPost = posts[Math.floor(Math.random() * posts.length)];
  const randomUrl = '/' + randomPost;
  window.pjax ? pjax.loadUrl(randomUrl) : window.open(randomUrl, '_self');
}</script><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2026/02/01/PicGo图床搭建指南/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/tuchuang.gif" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-02-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2026/02/01/PicGo图床搭建指南/&quot;);" href="javascript:void(0);" alt="">从零开始搭建图床</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2026/02/01/PicGo图床搭建指南/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2026/02/01/Con-Nav-Item安装指南/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://b5dbf24.webp.li/icons/Con-Nav-Item.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-02-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2026/02/01/Con-Nav-Item安装指南/&quot;);" href="javascript:void(0);" alt="">搭建现代化浏览器导航站</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2026/02/01/Con-Nav-Item安装指南/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>